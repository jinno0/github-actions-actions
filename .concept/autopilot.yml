version: "1.0"
note: "推定 - AIによって自動生成された autopilot契約。ユーザーの確認が必要。"

commands:
  # YAML構文チェック
  yamllint: |
    find actions -name 'action.yml' -exec python3 -c "import yaml; yaml.safe_load(open('{}'))" \;
  
  # 構造チェック（action.yml + templates/ + examples/ + instructions/）
  structure-check: |
    for action in actions/*/; do
      name=$(basename "$action")
      echo "Checking $name:"
      echo "  action.yml: $([ -f "$action/action.yml" ] && echo '✓' || echo '✗')"
      echo "  templates/: $(ls "$action/templates/" 2>/dev/null | wc -l) files"
      echo "  example: $([ -f "examples/${name}-example.yml" ] && echo '✓' || echo '✗')"
      echo "  instruction: $([ -f "instructions/${name}.md" ] && echo '✓' || echo '✗')"
    done
  
  # Dry Runテスト（実際のcommit/pushは行わない）
  dry-run-test: |
    .github/workflows/test-all-actions.yml

budget:
  max_cycles: 5
  max_files: 25
  max_loc_add: 800
  max_loc_del: 800

mode: "dry_run"  # pr|commit|dry_run

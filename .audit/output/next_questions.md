# 確認事項と仮定の報告

対話ができないため、以下の仮定に基づいて監査を完了させました。
認識が異なる場合は `.audit/config/intent.yml` を修正してください。

---

## 適用した仮定

| ID | 項目 | 仮定した値 | 根拠 | 信頼度 |
|----|------|------------|------|--------|
| ASM-001 | ターゲットユーザー | Self-hosted runner環境の開発チーム | PURPOSE.mdでSelf-hosted runnerへの言及が複数ある | high |
| ASM-002 | テストカバレッジ目標 | 80%以上 | pyproject.tomlとpytest.iniの設定から推測 | medium |
| ASM-003 | デプロイ先 | 組織内の複数リポジトリ | PURPOSE.mdの成功条件 | high |
| ASM-004 | 主要言語 | Python 3.11+ | pyproject.tomlで明記 | high |
| ASM-005 | 実行環境 | Ubuntu 20.04+ (2GB RAM) | ACTIONS.mdのPrerequisites | medium |

### 重要な仮定の詳細

#### ASM-002: テストカバレッジ80%目標
- **仮定の内容:** pytest.iniで70%, pyproject.tomlで80%と設定されているが、目標値は80%
- **不確実性:** これはPythonコードのみのカバレッジで、シェルスクリプトを含まない
- **検証方法:** PR-003（シェルスクリプトテスト導入）実施後に全体カバレッジを再測定
- **影響:** シェルスクリプトのカバレッジが低い場合、全体として80%を下回る可能性

#### ASM-003: 組織内の複数リポジトリが対象
- **仮定の内容:** このActions Hubは組織内の複数リポジトリで採用されることを目標としている
- **不確実性:** 実際の採用数が不明
- **検証方法:** PR-006（採用追跡自動化）でorganization内のリポジトリをスキャン
- **影響:** 採用が進んでいない場合、成功条件の達成度が低い

---

## 不明点（Unknowns）と確認をお願いしたい事項

### U-001: 実際のorganization内での採用状況
**質問:** 現在、organization内の何リポジトリでこれらのActionsが使用されていますか？

- **なぜ不明か:** 実際のGitHub Organizationデータへのアクセス権がないため
- **推測:** scan_adoption.pyスクリプトが存在することから、まだ自動化されていない可能性
- **検証方法:** `gh api`を使用してorganizationリポジトリをスキャン
- **優先度:** high（成功条件「組織内の複数リポジトリで採用」の達成度測定のため）

### U-002: Claude Code CLIのバージョン要件
**質問:** これらのActionsはどのバージョンのClaude Code CLIで動作確認されていますか？

- **なぜ不明か:** ドキュメントにバージョン指定がない
- **推測:** 最新版または主要なバージョンで動作
- **検証方法:** 複数バージョンでの動作確認テストを実施
- **優先度:** medium（互換性問題の予防）

### U-003: 各Actionの実際の実行時間とリソース使用量
**質問:** 各Actionは実際にどのくらいの時間で完了し、どの程度のリソースを使用していますか？

- **なぜ不明か:** 本番環境での実行ログにアクセスできない
- **推測:** ほとんどのActionは5分以内、メモリ2GB以内
- **検証方法:** GitHub Actionsの実行ログを収集・分析
- **優先度:** medium（パフォーマンス制約の遵守確認）

### U-004: AI提案のAcceptance Rate
**質問:** AI（Claude）が提案した変更のうち、実際に採用されている割合はどのくらいですか？

- **なぜ不明か:** calculate_acceptance_rate.pyが自動実行されていない
- **推測:** 不明（初回測定必要）
- **検証方法:** PR-002のワークフローを実行し、週次追跡を開始
- **優先度:** high（成功条件「Acceptance Rate向上」の測定のため）

### U-005: シェルスクリプトのテストカバレッジ
**質問:** actions/配下のシェルスクリプトはどの程度テストされていますか？

- **なぜ不明か:** シェルスクリプト用のテストフレームワーク導入されていない
- **推測:** 0%（テストなし）
- **検証方法:** PR-003でBATS導入後、カバレッジ計測
- **優先度:** high（品質保証のため）

---

## 認識の合否確認

以下の点について、チームの認識と合っているか確認をお願いします。

### [ ] 1. テストカバレッジ92.99%は「Pythonコードのみ」のカバレッジ
**監査での発見:** pytest coverageはscripts/とactions/lib/のみを対象としており、actions/のシェルスクリプトは含まれていない。

**認識が異なる場合:** もしシェルスクリプトも含めて92.99%なら、測定方法を教えてください。

### [ ] 2. 15個のActionのうち7個にaction.ymlが存在しない
**監査での発見:** 15個のアクションディレクトリに対し、14個のREADME、13個のaction.ymlが存在。

**認識が異なる場合:** これらは正式なGitHub Actionsではなく、ヘルパースクリプト等ですか？

### [ ] 3. Acceptance Rateと採用数は現在追跡されていない
**監査での発見:** スクリプトは存在するが、自動化された定期実行のワークフローがない。

**認識が異なる場合:** もし既に別の方法で追跡しているなら、その方法を教えてください。

### [ ] 4. セキュリティ監査（パストラバーサル対策）は未実施
**監査での発見:** 各Actionのパス検証ロジックの一貫性が確認されていない。

**認識が異なる場合:** もしセキュリティ監査済みなら、その結果を共有してください。

---

## 次回監査へのフィードバック

以下の情報を提供していただくと、次回の監査精度が向上します：

1. ✅ **ASM-002の検証結果:** シェルスクリプトを含む全体のテストカバレッジ実測値
2. ✅ **ASM-003の検証結果:** organization内での実際の採用リポジトリ数
3. ✅ **U-001の解消:** 採用状況の定量的データ
4. ✅ **U-004の解消:** Acceptance Rateの現状とトレンド
5. ✅ **U-005の解消:** シェルスクリプトの品質検証結果

---

## 仮定の修正方法

認識が異なる仮定がある場合、以下の手順で修正してください：

1. `.audit/config/intent.yml` を開く
2. 該当する`assumptions`エントリを更新
3. 必要に応じて`mission`や`quality_attributes`も修正
4. コミット: `git add .audit/config/intent.yml && git commit -m "audit: update assumptions based on team feedback"`

---

**文脈:** この監査は「非同期進行プロトコル（Non-Blocking Logic）」で実行されました。不明点は論理的な仮定で埋め、処理を完走しています。認識の齟齬があれば、上記の方法で修正してください。

# 確認事項と仮定の報告

対話ができないため、以下の仮定に基づいて監査を完了させました。
認識が異なる場合は `.audit/config/intent.yml` を修正してください。

---

## 適用した仮定

| ID | 項目 | 仮定した値 | 根拠 | 確認が必要ですか？ |
|----|------|------------|------|-------------------|
| **ASM-001** | ターゲットユーザー | Self-hosted runnerを運用する企業の開発チーム | README.mdでSelf-hosted runnerとClaude Code CLIを前提としている | ❌ 明確な根拠あり |
| **ASM-002** | テストカバレッジ目標 | >= 70% | pytest.iniで --cov-fail-under=70 と設定されている | ❌ 設定ファイルで明示 |
| **ASM-003** | デプロイ方法 | GitHub Marketplace ではなく内部actionsディレクトリ | README.mdで examples/ を .github/workflows/ にコピーするよう説明 | ⚠️ 組織のポリシー次第 |
| **ASM-004** | 対象規模 | 10〜100リポジトリ規模の組織 | ADOPTION_GUIDE.mdが存在し、組織導入を想定 | ✅ 是非確認ください |
| **ASM-005** | Claude CLI | Self-hosted runnerにインストール済み | 全アクションがclaudeコマンドを直接呼び出している | ❌ 技術的前提として明示 |

---

## 質問（次回の精度向上のため）

### 1. ASM-004: 対象組織の規模
**質問**: 現在、このリポジトリは何リポジトリで利用されていますか？
**仮定**: 10〜100リポジトリ規模
**確認方法**:
- 導入しているリポジトリ数を教えてください
- または、ADOPTION.md (PR-003) で追跡を開始しますか？

### 2. 実際の導入状況
**質問**: どのアクションが最も利用されていますか？
**現状**: 導入実績が不明 (GAP-002)
**確認方法**:
- 利用状況の調査を許可しますか？
- 導入事例を公開可能ですか？

### 3. テスト優先順位
**質問**: 残り10アクションのテスト実装（PR-001）について、優先順位はありますか？
**提案**: 全10アクションを一括実装（推定20時間）
**代替案**:
- 特定アクションだけ優先（例: よく使われているもの）
- または、現状の3アクションで十分と判断

### 4. カバレッジの見せ方
**質問**: テストカバレッジ95.3%という数字について
**現状**: テスト済み3アクションのみのカバレッジ
**懸念**: 全13アクションで見ると大きく下がる可能性
**確認方法**:
- 現状の95.3%表記のままで良いですか？
- または、「3/13アクションがテスト済み（95.3% coverage）」と明記？

### 5. 本番環境のOS
**質問**: Self-hosted runnerのOSは何ですか？
**仮定**: Linux
**確認**: 他にWindows, macOSのrunnerはありますか？

### 6. Claude Code CLIのバージョン
**質問**: 利用中のClaude Code CLIのバージョンは？
**影響**: アクションの互換性に影響する可能性
**確認**: バージョン固定ですか？または、複数バージョンをサポート？

### 7. セキュリティポリシー
**質問**: 機密情報の取り扱いについて
**現状**: 各アクションがプロンプトやdiffを扱う
**確認**:
- AIに送信するコードに機密情報が含まれる可能性はありますか？
- その場合、フィルタリングの仕組みは必要ですか？

### 8. 改善ロードマップの承認
**質問**: 提案した改善ロードマップについて
**提案内容**:
- Phase 1: テストカバレッジ拡大 (Critical)
- Phase 2: 導入追跡 (High)
- Phase 3: ドキュメント強化 (Medium)
**確認**:
- 優先順位に同意しますか？
-着手時期の目安はありますか？

---

## 仮定を修正する場合

以下のファイルを編集してください:

### ターゲットユーザーや規模が異なる場合
```bash
vim .audit/config/intent.yml
# [ASM-001], [ASM-004] の値を修正
```

### テスト基準が異なる場合
```bash
vim .audit/config/intent.yml
# [QA-001] の target 値を修正
```

### 非目標を追加する場合
```bash
vim .audit/config/intent.yml
# non_goals セクションに追加
```

### 制約条件が変わる場合
```bash
vim .audit/config/constraints.yml
# 適切なセクションを更新
```

---

## 次回監査時の改善ポイント

今回適用した仮定が正確であった場合、次回は以下を改善できます:

1. **導入実績の追跡** (GAP-002)
   - ADOPTION.md を作成し、実際の利用状況を記録

2. **テスト範囲の拡大** (GAP-001)
   - 残り10アクションのテストを実装し、READMEの主張と一致させる

3. **実践的なドキュメント** (GAP-004)
   - TROUBLESHOOTING.md を作成し、よくある問題と解決方法を記載

4. **カバレッジの正確な報告**
   - アクションごとのカバレッジを公開

---

## 監査の限界

Non-Blocking Core Logicにより、以下の点で完全性が制限されています:

1. **実際の利用状況**: ADOPTION.mdがないため、導入実績が不明
2. **実行時の品質**: Dry Run検証のみで、実際のproductionパフォーマンスは未計測
3. **AIの精度**: Claude Code CLIの出力品質は評価対象外
4. **セキュリティ**: プロンプトインジェクション等のセキュリティ検証は不十分

これらは、実際に導入・運用しながら改善していく必要があります。

---

**最終更新**: 2026-02-02T09:00:00Z
**次回監査推奨**: PR-001完了後（約1ヶ月後）

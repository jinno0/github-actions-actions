# 確認事項と仮定の報告

**Audit Run ID:** 2026-02-07T07:48:00Z
**Date:** 2026-02-07

対話ができないため、以下の仮定に基づいて監査を完了させました。
認識が異なる場合は `intent.yml` を修正してください。

---

## 適用した仮定

### 既存の仮定（維持または更新されたもの）

| ID | 項目 | 仮定した値 | ステータス | 信頼度 |
|----|------|-----------|----------|--------|
| ASM-001 | ターゲットユーザー | GitHub Organizationを使用する企業や組織 | maintained | high |
| ASM-002 | 実行環境 | Self-hosted runnerを運用している環境 | maintained | high |
| ASM-005 | デプロイ方式 | Composite Actionsのみ | **confirmed** | high |

### 更新・却下された仮定

| ID | 項目 | 以前の値 | 新しい値 | 理由 |
|----|------|---------|---------|------|
| ASM-003 | テストカバレッジ目標 | >= 70% | >= 70% (ただし測定値に不整合あり) | coverage.json (92.99%) と pytest report (11.11%) が大きく異なる |
| ASM-004 | 受入率目標 | >= 70% | >= 70% (ただしレビューデータが0件のため未測定) | review_metrics.json が存在しない |
| ASM-006 | ユーザー採用 | 2 pilot projects | **不明（プレースホルダーのみ）** | ADOPTION.mdのパイロットプロジェクトが example/repo-1, example/repo-2 （プレースホルダー） |
| ASM-007 | テレメトリデータ収集 | working | **not_working** | metrics/telemetry/ ディレクトリが空 |

---

## 質問（次回の精度向上のため）

### 優先度1：_critical（ISS-NEW-004の解決に必要）

- [ ] **Q1:** テストカバレッジの測定値について
  - coverage.json が 92.99% を報告しているが、pytest report は 11.11% と報告している
  - どちらが正しい値か？
  - もし可能であれば、以下のコマンドの実行結果を教えてください：
    ```bash
    cat .coveragerc
    cat pytest.ini
    git log --all --full-history -- coverage.json | head -20
    ```

### 優先度2：high（ISS-NEW-002の解決に必要）

- [ ] **Q2:** パイロットプロジェクトについて
  - README.md や ADOPTION.md では「2件のパイロットプロジェクト」と記載されている
  - しかし、ADOPTION.md には `example/repo-1`, `example/repo-2` としか書かれていない
  - **実際のパイロットプロジェクトはどのリポジトリか？**
  - 各プロジェクトの連絡先は誰か？

- [ ] **Q3:** もしパイロットプロジェクトが実際には存在しない場合
  - 採用クレーム（"Current adopters: 2 pilot projects"）を撤回すべきか？
  - それとも、これからパイロットプロジェクトを探す予定か？

### 優先度3：medium（ISS-NEW-001の解決に必要）

- [ ] **Q4:** レビューデータ収集について
  - metrics/review_metrics.json が存在しない
  - review-and-merge Action は実際にパイロットプロジェクトで稼働しているか？
  - 稼働している場合、なぜデータが収集されていないのか？

### 優先度4：low（ISS-NEW-003）

- [ ] **Q5:** ドキュメント構造の不一致について
  - SYSTEM_CONSTITUTION.md では各Actionに `examples/` と `instructions/` ディレクトリを求めている
  - 実際はトップレベルの `examples/` と `instructions/` に集約されている
  - これは意図的な設計変更か、それとも文書化が追いついていないだけか？
  - （機能的には問題ないため、優先度は低い）

---

## 新しく発見された課題

### 🚨 Critical

**ISS-NEW-004: coverage.py 設定の不整合によりテストカバレッジが正しく測定できない**
- coverage.json (92.99%) と pytest report (11.11%) の値が大きく異なる
- どちらが正しいか判断できない状態
- 影響: QA-001（テストカバレッジ>=70%）の評価が不可能

**調査計画:**
1. `.coveragerc` と `pytest.ini` の設定を確認
2. coverage.json の生成履歴を確認
3. テスト対象ディレクトリの設定を確認
4. クリーンな状態でテストを再実行

### 🔴 High

**ISS-NEW-002: パイロットプロジェクトの特定と連絡先が不明**
- ADOPTION.md がプレースホルダーのまま（example/repo-1, example/repo-2）
- Phase 2（User Feedback Collection）の実行が不可能
- **人間の入力が必要**

**解決策:**
1. ADOPTION.md を更新し、実際のリポジトリ名と連絡先を記載
2. または、パイロットプロジェクトが実際には存在しない場合、採用クレームを撤回

**ISS-NEW-001: レビューデータ収集プロセスが稼働していない**
- metrics/review_metrics.json が存在しない
- review-and-merge Action が実際に稼働しているか不明

**解決策:**
1. パイロットプロジェクトで review-and-merge Action が実際に稼働しているか確認
2. metrics/review_metrics.json への出力プロセスを確認
3. 必要に応じてデータ収集ワークフローを整備

### 🟡 Medium

**GAP-003: テレメトリー収集状況の可視化が不足**
- README.md にはテレメトリー機能の説明があるが、実際は未実装
- metrics/telemetry/ ディレクトリが空

### 🟢 Low

**ISS-NEW-003: ドキュメント構造のSYSTEM_CONSTITUTION.mdとの不一致**
- 機能的には問題ないが、ドキュメントと実装が不一致
- 優先度は低い

---

## 今後のアクション

### 即座に必要なアクション（優先度順）

1. **ISS-NEW-004 の調査と解決**（2-4時間）
   - テストカバレッジの測定値の不整合を解消する
   - QA-001 の信頼性を回復する

2. **実際のパイロットプロジェクトの特定**（人間の回答必要、1-4時間）
   - ISS-NEW-002 の解決
   - ADOPTION.md の更新

3. **レビューデータ収集の確認**（2-8時間）
   - ISS-NEW-001 の解決
   - ISS-NEW-002 に依存

4. **テレメトリー実装の検討**（4-8時間）
   - GAP-003 の解決
   - 優先度は中程度

---

## 監査の制約

以下の制約がありましたが、論理的な仮定に基づいて監査を完了しました：

1. **パイロットプロジェクトへのアクセスなし**
   - → プレースホルダーであることを特定し、ISS-NEW-002 として記録

2. **本番環境での動作検証なし**
   - → ドキュメントとコード構造の検証に留めた

3. **テストカバレッジの測定値に不一致あり**
   - → ISS-NEW-004 として記録し、調査計画を立てた

---

## 次回監査での改善

- 複数の測定ツールがある場合、値の整合性をクロスチェックする
- プレースホルダー（example/repo-*）の検出を標準手順に追加
- 人間の入力を必要とする項目を早期に特定する

# PR-005: Address YAML Line Length Warnings (ISS-NEW-002)

## Summary
Address 18 YAML line-length warnings to improve code consistency and readability.

**Priority**: LOW (Style improvement)
**Estimated Effort**: 1-2 hours (incremental)
**Type**: Code Quality
**Gap Resolved**: ISS-NEW-002

## Problem Statement

yamllint reports 18 warnings for lines exceeding 120 characters. While these don't block CI, they indicate inconsistent formatting.

**Current Warnings**:
- `actions/action-fixer/action.yml:65` - 133 chars
- `actions/action-fixer/action.yml:110` - 186 chars
- `actions/action-fixer/action.yml:111` - 160 chars
- `actions/auto-rebase/action.yml:176` - 140 chars
- `actions/pr-review-enqueuer/action.yml:141` - 165 chars
- `actions/release-notes-ai/action.yml:55` - 188 chars
- `actions/release-notes-ai/action.yml:56` - 154 chars
- `actions/spec-to-code/action.yml:97` - 180 chars
- `actions/spec-to-code/action.yml:98` - 154 chars

## Root Cause

- Long descriptions in YAML fields
- Complex command strings in run steps
- No line-length enforcement previously

## Solution

### Option A: Fix Line Lengths (Recommended)

Break long lines into multiple lines using YAML's multiline syntax.

#### Example Transformation

**Before**:
```yaml
description: "This is a very long description that exceeds the 120 character limit and should be broken into multiple lines for better readability"
```

**After**:
```yaml
description: >-
  This is a very long description that exceeds the 120 character limit
  and should be broken into multiple lines for better readability
```

#### Changes Required

1. **actions/action-fixer/action.yml**
   - Line 65: Break description or use folded scalar (`>`)
   - Line 110-111: Break long command into multiple lines

2. **actions/auto-rebase/action.yml**
   - Line 176: Refactor long step

3. **actions/pr-review-enqueuer/action.yml**
   - Line 141: Break long description

4. **actions/release-notes-ai/action.yml**
   - Line 55-56: Use folded scalar for descriptions

5. **actions/spec-to-code/action.yml**
   - Line 97-98: Break long descriptions

### Option B: Adjust yamllint Configuration (Alternative)

If team prefers longer lines, adjust `.yamllint` config:

```yaml
rules:
  line-length:
    max: 150  # Increase from 120 to 150
```

**Trade-off**: Less strict but may reduce readability

### Recommendation

**Option A** is recommended because:
- Improves code readability
- Follows YAML best practices
- Consistent with existing 120-char limit
- Low incremental effort (1-2 hours)

## Implementation Steps

1. Create feature branch:
   ```bash
   git checkout -b style/yaml-line-length
   ```

2. Fix each file incrementally:
   ```bash
   # Edit each file to break long lines
   # Use YAML folded scalar (>) or literal scalar (|)
   ```

3. Verify warnings are resolved:
   ```bash
   yamllint actions/*/action.yml 2>&1 | grep "line too long"
   # Expected: No output (all warnings resolved)
   ```

4. Run full test suite:
   ```bash
   pytest --cov=. --cov-report=term-missing
   ```

5. Commit changes:
   ```bash
   git add actions/*/action.yml
   git commit -m "style: Break long YAML lines to meet 120-char limit"
   ```

6. Push and create PR

## Testing Plan

### Pre-merge Verification
1. Run yamllint on all action.yml files
2. Verify line-length warnings are resolved (target: 0 warnings)
3. Run full test suite (must pass all 455 tests)
4. Manual test: Verify actions still parse correctly

### Post-merge Verification
1. Monitor CI workflow
2. Confirm yamllint job passes with 0 warnings
3. Verify no regressions in action functionality

## Rollback Plan

If YAML parsing issues occur:
1. Revert commit: `git revert <commit-hash>`
2. CI will continue to work (warnings don't block)

**Rollback Command**:
```bash
git revert HEAD --no-edit
git push origin <branch>
```

## Success Criteria

- [ ] yamllint reports 0 line-length warnings
- [ ] Full test suite passes (455 tests)
- [ ] All action.yml files remain valid YAML
- [ ] No regressions in action functionality
- [ ] Code readability improved

## Related Issues

- Partially resolves: ISS-NEW-002
- Follows: PR-001 (yamllint integration)

## Additional Notes

- **Low priority** - these are warnings, not errors
- Can be done incrementally (file-by-file)
- Consider addressing during natural code review cycle
- Estimated time: 1-2 hours total
- Alternative: Adjust yamllint config if team prefers longer lines

## Verification Commands

```bash
# Check remaining warnings
yamllint actions/*/action.yml 2>&1 | grep "line too long" | wc -l
# Expected: 0

# Full verification
pytest --cov=. --cov-report=term-missing -q
# Expected: 455 passed, 2 skipped
```

## Incremental Approach

If full PR is too large, split into file-specific PRs:
- PR-005a: Fix action-fixer (3 warnings)
- PR-005b: Fix release-notes-ai (2 warnings)
- PR-005c: Fix spec-to-code (2 warnings)
- PR-005d: Fix remaining files

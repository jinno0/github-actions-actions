# PR-002: Lint Framework Setup (ruff)

**Status:** Proposed
**Priority:** Medium
**Estimated Impact:** Medium
**Risk:** Low

## Problem

- Lintチェックが自動化されていない
- コード品質の一貫性が担保できない
- バグの早期発見ができていない

## Proposed Solution

### 1. ruff の導入

```bash
# pyproject.toml に追加
ruff>=0.1.0
```

### 2. pyproject.toml の設定追加

```toml
[tool.ruff]
line-length = 100
target-version = "py311"

select = [
    "E",   # pycodestyle errors
    "W",   # pycodestyle warnings
    "F",   # pyflakes
    "I",   # isort
    "B",   # flake8-bugbear
    "C4",  # flake8-comprehensions
    "UP",  # pyupgrade
]

ignore = [
    "E501",  # line too long (handled by formatter)
]

[tool.ruff.per-file-ignores]
"__init__.py" = ["F401"]  # unused imports
```

### 3. pre-commit hook の設定

```yaml
# .pre-commit-config.yaml
repos:
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.1.0
    hooks:
      - id: ruff
        args: [--fix, --exit-non-zero-on-fix]
      - id: ruff-format
```

### 4. CI での Lint チェック追加

```yaml
# .github/workflows/lint.yml
name: Lint

on: [push, pull_request]

jobs:
  ruff:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      - run: pip install ruff
      - run: ruff check .
      - run: ruff format --check .
```

## Files to Change

| File | Action | Lines Added | Lines Removed |
|------|--------|-------------|---------------|
| `pyproject.toml` | Modified | ~15 | 0 |
| `.pre-commit-config.yaml` | Created | ~10 | 0 |
| `.github/workflows/lint.yml` | Created | ~20 | 0 |

## Verification Steps

1. `ruff check .` を実行
2. Lint結果が表示されることを確認
3. `ruff format .` でフォーマットが適用されることを確認

## Expected Impact

- コード品質の一貫性が向上
- バグの早期発見が可能
- チーム開発での生産性向上

## Rollback Plan

```bash
git checkout pyproject.toml
rm .pre-commit-config.yaml
rm .github/workflows/lint.yml
```

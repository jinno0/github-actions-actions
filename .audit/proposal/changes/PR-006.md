# PR-006: Lint Error Fix and Code Quality Improvement

## Summary
ruff checkを実行し、検出されたLintエラーを全て修正する。また、pre-commit hookを設定し、今後のLintエラーを防止する。

## Motivation
- 現状、Lintチェックが実行されておらず、エラー数が不明
- feedback_to_auditor.ymlで「既存コードに多くのエラーが出る可能性」と指摘されている
- コード品質の一貫性を担保するため、Lintチェックの導入が必須

## Background
- 前回監査でruffは導入済み（framework_ready）
- .pre-commit-config.yamlは存在するが、ruff checkは未実行

## Proposed Changes

### Step 1: Lintチェック実行とエラー数把握
```bash
cd /home/jinno/github-actions-actions
ruff check . --output-format=json > lint_results.json
```

### Step 2: エラーの分類と修正
予想されるエラーの種類:
- **F401**: import unused (importされているが使用されていない)
- **E501**: line too long (行が長い)
- **F841**: local variable assigned but never used (変数が定義されているが使用されていない)
- **W503**: line break before binary operator (演算子の前で改行)

修正方針:
- import unused: 不要なimportを削除
- line too long: 行を分割または文字列を分割
- unused variable: 変数を使用または削除
- その他: ruffのauto-fixを活用

```bash
# ruffのauto-fixを実行
ruff check . --fix
```

### Step 3: pre-commit hookの設定
.pre-commit-config.yamlにruffを追加:
```yaml
repos:
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.1.9
    hooks:
      - id: ruff
        args: [--fix, --exit-non-zero-on-fix]
      - id: ruff-format
```

pre-commitのインストール:
```bash
pip install pre-commit
pre-commit install
```

## Expected Impact
- Lintエラー: unknown → 0件
- コード品質の一貫性が向上
- 今後のLintエラーをpre-commitで防止

## Success Criteria
- `ruff check .` でエラー0件
- pre-commit hookがインストールされている
- コミット時に自動的にruffが実行される

## Estimated Effort
- Lintチェック実行: 5分
- エラー修正: 1〜3時間（エラー数による）
- pre-commit設定: 15分
- **合計: 約2〜4時間**

## Dependencies
- ruff (already installed)
- pre-commit (needs installation)

## Risks
- 中リスク: コードのフォーマットが変更される可能性がある
- auto-fixで機能が変更されるリスクは低い（構文エラーのみ修正）

## Rollback Plan
auto-fixの結果をコミット前に確認し、問題がある場合は手動で調整する

## Related Gaps
- GAP-002: Lintエラー修正

## Priority
Priority: 3 (テスト追加後の実施を推奨)

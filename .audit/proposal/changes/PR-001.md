# PR-001: Add YAML Linting to CI Pipeline

**Generated**: 2026-02-08
**Resolves**: ISS-006 (YAML syntax validation)
**Priority**: HIGH
**Estimated Impact**: MEDIUM (prevents runtime failures)
**Risk**: LOW (non-breaking, additive)

## Problem Statement
Multiple YAML files (actions, examples, workflows) exist but syntax validation isn't automated. This creates risk of YAML syntax errors causing runtime failures.

According to `.audit/analysis/gap.yml` ISS-006:
- **Impact**: MEDIUM - YAML syntax errors could cause runtime failures
- **Intent Source**: QA-003 (0 YAML errors)
- **Current State**: No YAML linting performed in audit

## Proposed Changes

### 1. Create `.github/workflows/lint.yml`
```yaml
name: Lint

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]

jobs:
  yamllint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install yamllint
        run: pip install yamllint
      - name: Run yamllint
        run: |
          yamllint actions/*/action.yml \
                    examples/*.yml \
                    instructions/*.yml \
                    .github/workflows/*.yml
```

### 2. Create `.yamllint` configuration
```yaml
extends: default

rules:
  line-length:
    max: 120
    level: warning
  indentation:
    spaces: 2
    indent-sequences: true
```

### 3. Update README.md
Add section in TESTING.md or README.md:
```markdown
## YAML Linting

All YAML files are validated using yamllint. To run locally:
\`\`\`bash
pip install yamllint
yamllint actions/*/action.yml examples/*.yml instructions/*.yml
\`\`\`
```

## Files to Create
- `.github/workflows/lint.yml` (new)
- `.yamllint` (new)

## Files to Modify
- `README.md` (add YAML linting documentation)
- `TESTING.md` (add YAML linting section, if exists)

## Success Criteria
1. ✅ CI workflow executes without errors
2. ✅ All existing YAML files pass validation
3. ✅ PR checks include yamllint status
4. ✅ Local developers can run yamllint

## Verification Plan
```bash
# Before merge: Verify no existing YAML errors
pip install yamllint
yamllint actions/*/action.yml examples/*.yml instructions/*.yml .github/workflows/*.yml

# Expected: No errors (warnings acceptable)
```

## Rollback Plan
If CI breaks:
```bash
git revert <commit-hash>
# Or disable workflow temporarily
gh workflow disable lint.yml
```

## Estimated Time
- Implementation: 30 minutes
- Testing: 15 minutes
- Total: 45 minutes

## Dependencies
None (additive change only)

## Notes
- This is a non-breaking change
- Existing workflows continue to work
- Only adds automated validation
- May expose pre-existing YAML issues (fixes required)

# Improvement Roadmap
# Generated by Repo Genesis Auditor v2.0

generated_at: "2026-02-02T09:00:00Z"
audit_version: "2.0"

## Overview

このロードマップは、ギャップ分析で特定された5つの課題に対する改善提案を優先順位順に提示します。

**判定**: Conditional Pass
- Core Functions: 4/4 検証完了（ただし3/13アクションのみ）
- Quality Attributes: 1/1 達成（ただし範囲が限定）

---

## Phase 1: Test Coverage Expansion (Critical)

### 目標
残り10アクションのテスト実装により、READMEの主張「全てのAI ActionsはDry Run検証可能」を実現する。

### アクション

#### PR-001: Test Infrastructure for Remaining 10 Actions
**Priority**: Critical
**Effort**: High
**Related GAP**: GAP-001

**提案内容**:
以下の10アクションについて、action-fixer/review-and-merge/spec-to-codeと同等のテストを実装する。

対象アクション:
1. `auto-document`
2. `auto-merge`
3. `auto-rebase`
4. `auto-refactor`
5. `bulk-merge-prs`
6. `bulk-rebase-prs`
7. `pr-review-enqueuer`
8. `publish-pr`
9. `release-notes-ai`
10. `review-auto-merge`

**実装手順**:
1. `tests/test_{action_name}/` ディレクトリ作成
2. `test_{action_name}_action.py` 実装
   - `test_action_yaml_exists`
   - `test_action_required_inputs`
   - `test_action_yaml_syntax_valid`
   - `test_template_files_exist`
   - `test_action_directory_structure`
   - `test_action_has_composite_run_type`
3. `conftest.py` に fixture 追加（必要に応じて）

**期待効果**:
- テストカバレッジの対象範囲が 3/13 → 13/13 に拡大
- READMEの主張と実態が一致
- 新規アクション追加時の品質保証が強化

**検証方法**:
```bash
pytest tests/ -v
# Expected: 60 tests → 260 tests (概算)
```

**リスク**:
- 作業工数が大きい（各アクション約2時間 × 10 = 20時間）
- 一部アクションはテスト設計が困難な可能性（例: auto-rebaseのコンフリクト解決）

**ロールバック**:
テスト追加のみのため、ロールバックは不要。失敗した場合は該当テストを削除。

---

#### PR-002: Automated Test Template Generator
**Priority**: High
**Effort**: Medium
**Related GAP**: GAP-001

**提案内容**:
新規アクションのテストを自動生成するスクリプトを作成する。

**実装**:
`.audit/helpers/generate_test_template.py` を作成
```python
# Usage: python .audit/helpers/generate_test_template.py auto-document
# → tests/test_auto_document/test_auto_document_action.py を生成
```

**期待効果**:
- PR-001の作業工数を削減（20時間 → 10時間）
- テストの一貫性を保証
- 将来のアクション追加時の再利用

---

## Phase 2: Adoption Tracking (High)

### 目標
導入実績を可視化し、成功条件の評価を可能にする。

#### PR-003: Adoption Registry Implementation
**Priority**: High
**Effort**: Medium
**Related GAP**: GAP-002

**提案内容**:
導入リポジトリを追跡するレジストリを作成する。

**実装**:
`ADOPTION.md` を新規作成
```markdown
# Adoption Registry

## Using Organizations

### Team A (since 2025-01-15)
- Repositories: 5
- Actions in use: review-and-merge, auto-merge
- Feedback: Positive

### Team B (since 2025-02-01)
- Repositories: 2
- Actions in use: spec-to-code
- Feedback: Needs improvement in ...
```

**期待効果**:
- PURPOSE.mdの成功条件「組織内の複数のリポジトリで採用」を測定可能
- 導入チームからのフィードバック収集
- ユースケースの特定

**検証方法**:
- `ADOPTION.md` に少なくとも1つの導入事例が記載される
- 定期的な更新（月次）が行われる

**リスク**:
- プライバシーの問題（チーム名を公開できるか）
- 更新作業の負担

---

## Phase 3: Documentation Enhancement (Medium)

### 目標
実践的な導入ノウハウを蓄積し、導入ハードルを下げる。

#### PR-004: Troubleshooting Guide
**Priority**: Medium
**Effort**: Low
**Related GAP**: GAP-004

**提案内容**:
`TROUBLESHOOTING.md` を新規作成し、よくある問題と解決方法を記載する。

**セクション**:
1. Self-hosted Runner のセットアップ
2. Claude Code CLI のインストール
3. アクション実行時の権限エラー
4. AIの応答が遅い/不安定な場合
5. テストが失敗する場合

**期待効果**:
- 新規導入組織の試行錯誤を削減
- 既存ユーザーのサポート負荷軽減

---

#### PR-005: Examples Validation Workflow
**Priority**: Medium
**Effort**: Medium
**Related GAP**: GAP-005

**提案内容**:
`examples/` ディレクトリのYAMLファイルが実際に動作するかを検証するGitHub Actionsワークフローを作成する。

**実装**:
`.github/workflows/validate-examples.yml`
```yaml
on: [push, pull_request]
jobs:
  validate-examples:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Validate all examples
        run: |
          for file in examples/*.yml; do
            python -m yaml $file || exit 1
          done
```

**期待効果**:
- examplesの品質保証
- ユーザーがコピーしても動かない問題を防止

---

## Phase 4: Metrics & Reporting (Low)

### 目標
継続的な改善のための指標を追跡する。

#### PR-006: Coverage Dashboard
**Priority**: Low
**Effort**: Medium
**Related GAP**: GAP-003

**提案内容**:
各アクションごとのテストカバレッジを可視化するダッシュボードを作成する。

**実装**:
READMEに以下のセクションを追加
```markdown
## Test Coverage

| Action | Coverage | Tests |
|--------|----------|-------|
| action-fixer | 95% | 20 |
| review-and-merge | 88% | 18 |
| spec-to-code | 92% | 22 |
| auto-document | 0% | 0 | ← TODO
...
```

---

## Implementation Priority

### Week 1-2
1. **PR-001**: Test Infrastructure (Critical)

### Week 3
2. **PR-003**: Adoption Registry (High)
3. **PR-004**: Troubleshooting Guide (Medium)

### Week 4
4. **PR-002**: Test Template Generator (High)
5. **PR-005**: Examples Validation (Medium)

### Month 2+
6. **PR-006**: Coverage Dashboard (Low)

---

## Success Criteria

Phase 1完了時:
- [ ] 13/13アクションのテストが存在
- [ ] `pytest tests/` が全パス
- [ ] READMEの主張と実態が一致

Phase 2完了時:
- [ ] ADOPTION.md に少なくとも1つの導入事例
- [ ] 月次更新の仕組みが確立

Phase 3完了時:
- [ ] TROUBLESHOOTING.md が作成
- [ ] examplesの自動検証が実装

---

## Risk Mitigation

**主なリスク**:
1. **工数不足**: PR-001の作業量が大きい
   - 緩和策: PR-002の自動化ツールを並行して開発

2. **導入実績の追跡困難**: プライバシーの問題
   - 緩和策: 匿名化した統計情報のみを収集

3. **テストメンテナンスの負荷**: 260テストの運用
   - 緩和策: テンプレート化とドキュメント化

---

## Next Steps

1. チーム内でこのロードマップをレビュー
2. 優先順位と工数の調整
3. **PR-001（Test Infrastructure）**の着手を推奨

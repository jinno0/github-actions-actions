version: "2.0"
updated_at: "2026-02-07T13:21:00Z"
updated_by: "audit-run-001"

# === 技術的制約 ===
technical:
  - id: "TC-001"
    name: "Composite Actionsのみ"
    description: "Docker container actions, JavaScript actions は含まない"
    source: "SYSTEM_CONSTITUTION.md:29-31"
    severity: "blocking"

  - id: "TC-002"
    name: "Self-hosted runner必須"
    description: "Claude Code CLIが実行可能な環境である必要がある"
    source: "README.md:83"
    severity: "blocking"

  - id: "TC-003"
    name: "単一責任の原則"
    description: "各Actionは1つの明確な目的のみを果たす"
    source: "SYSTEM_CONSTITUTION.md:37-42"
    severity: "blocking"

  - id: "TC-004"
    name: "組織横断的再利用性"
    description: "組織内のどのリポジトリからでも使用可能である必要がある"
    source: "SYSTEM_CONSTITUTION.md:44-50"
    severity: "blocking"

  - id: "TC-005"
    name: "バージョン固定"
    description: "タグ(v1, v2)でバージョン管理し、@mainは使用しない"
    source: "SYSTEM_CONSTITUTION.md:52-58"
    severity: "blocking"

# === セキュリティ制約 ===
security:
  - id: "SC-001"
    name: "秘匿情報の扱い"
    description: "トークン、パスワード、秘密鍵をコードに含めない"
    source: "SYSTEM_CONSTITUTION.md:61-67"
    severity: "critical"

  - id: "SC-002"
    name: "入力値のバリデーション"
    description: "全てのActionで入力値を検証する"
    source: "SYSTEM_CONSTITUTION.md:66"
    severity: "high"

  - id: "SC-003"
    name: "第三者スクリプトの実行検証"
    description: "外部スクリプトの実行は慎重に検証する"
    source: "SYSTEM_CONSTITUTION.md:67"
    severity: "high"

  - id: "SC-004"
    name: "プライバシー保護（テレメトリー）"
    description: "オプトアウト可能で匿名化されたテレメトリーのみ収集"
    source: "README.md:120-137"
    severity: "medium"

# === ドキュメント制約 ===
documentation:
  - id: "DC-001"
    name: "自己文書化"
    description: "全てのActionは説明文、入出力の定義、使用例を持つ"
    source: "SYSTEM_CONSTITUTION.md:69-76"
    severity: "high"

  - id: "DC-002"
    name: "README必須"
    description: "各ActionにREADME.mdが必要"
    severity: "high"

  - id: "DC-003"
    name: "instructions/ 必須"
    description: "各Actionに導入手順書が必要"
    source: "README.md:55-56"
    severity: "high"

  - id: "DC-004"
    name: "examples/ 必須"
    description: "各Actionに利用例が必要"
    source: "README.md:52-54"
    severity: "high"

# === テスト制約 ===
testing:
  - id: "TC-101"
    name: "カバレッジ目標"
    description: "テストカバレッジ >= 70%"
    source: "README.md:100"
    severity: "high"

  - id: "TC-102"
    name: "Dry Run検証"
    description: "全てのAI ActionsはDry Runモードで検証される"
    source: "README.md:94-96"
    severity: "high"

  - id: "TC-103"
    name: "スタンドアロンでテスト可能"
    description: "各Actionは単体でテスト可能である必要がある"
    source: "SYSTEM_CONSTITUTION.md:86"
    severity: "medium"

# === 運用制約 ===
operational:
  - id: "OC-001"
    name: "Human-in-the-Loop"
    description: "最終決定権（マージ、デプロイ）は人間が持つ"
    source: "PURPOSE.md:36-37"
    severity: "high"

  - id: "OC-002"
    name: "セマンティックバージョニング"
    description: "破壊的変更がある場合はメジャーバージョンを上げる"
    source: "SYSTEM_CONSTITUTION.md:54-55"
    severity: "high"

  - id: "OC-003"
    name: "後方互換性"
    description: "既存Actionのinputs削除は禁止"
    source: "SYSTEM_CONSTITUTION.md:107"
    severity: "blocking"

# === 依存関係制約 ===
dependencies:
  - id: "DP-001"
    name: "Claude Code CLI"
    description: "AIを活用したActionsの実行に必須"
    criticality: "high"
    mitigation: "CLI未インストール環境では明示的なエラーメッセージを表示"

  - id: "DP-002"
    name: "Self-hosted runner"
    description: "全てのActionsの実行基盤"
    criticality: "high"
    mitigation: "runnerのセットアップは別ドキュメントで提供"

  - id: "DP-003"
    name: "GitHub Actions"
    description: "プラットフォーム依存"
    criticality: "high"
    mitigation: "該当なし（GitHub Actions限定のツール）"

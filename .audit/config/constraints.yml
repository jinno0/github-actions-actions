version: "1.0"
updated_at: "2026-02-02T09:00:00Z"

# === Technical Constraints ===
technical:
  runtime:
    - "Self-hosted GitHub Actions Runner必須"
    - "Claude Code CLI がインストール済みであること"
    - "Python 3.9+ の実行環境"

  dependencies:
    external:
      - "Claude Code CLI (コマンド: claude)"
      - "GitHub Actions Runtime"
    internal:
      - "pytest (テスト実行)"
      - "pytest-cov (カバレッジ計測)"

  compatibility:
    - "GitHub Actions YAML構文"
    - "Bashシェルスクリプト"
    - "Pythonテストフレームワーク"

# === Operational Constraints ===
operational:
  execution_time:
    max_action_runtime: "30分"
    max_test_execution_time: "5分"

  security:
    required_permissions:
      - "contents: read"
      - "pull_requests: write"
      - "checks: write"
    forbidden_operations:
      - "シークレットのログ出力"
      - "未検証パスのファイル操作"
      - "外部APIへの不正アクセス"

  privacy:
    - "コードは組織内リポジトリのみで利用"
    - "AIプロンプトに機密情報を含めない設計"

# === Resource Constraints ===
resources:
  self_hosted_runner:
    min_memory: "4GB"
    min_disk: "20GB"
    network_access: true

  development:
    test_data_size: "最小限（モック使用）"
    external_services: "不要（Dry Run重視）"

# === Process Constraints ===
process:
  testing:
    - "全アクションはDry Run検証が必須"
    - "PR作成時に自動テスト実行"
    - "MainブランチPush時に全テスト実行"

  documentation:
    - "新規アクション追加時はトリプル必須（Action/Example/Instruction）"
    - "AGENTS.md の更新を推奨"

  version_control:
    - "構造的変更はPR経由"
    - "テスト失敗時はマージ禁止"

# === Quality Constraints ===
quality:
  code_coverage:
    minimum: 70
    current: 23
    gap: 47

  action_structure:
    required_files:
      - "action.yml"
      - "templates/*.txt"
    optional_files:
      - "scripts/*.sh"

  documentation_coverage:
    required_per_action:
      - "instructions/{action-name}.md"
      - "examples/{action-name}-example.yml"

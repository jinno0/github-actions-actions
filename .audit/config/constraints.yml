version: "1.0"
updated_at: "2026-02-08T00:00:00Z"
updated_by: "audit-run-2026-02-08"

# === 制約条件 ===

## 技術的制約
technical:
  - id: "TC-001"
    name: "Self-hosted Runner必須"
    description: "全てのAI ActionsはSelf-hosted runner上で実行される必要がある"
    reason: "Claude Code CLIへのアクセスとセキュリティ要件"
    impact: "GitHub-hosted runnersでは利用できない"

  - id: "TC-002"
    name: "Claude Code CLI依存"
    description: "全てのAI ActionsはClaude Code CLIに依存している"
    reason: "AI処理の中核機能"
    impact: "Claude CLIがインストールされていないrunnerでは実行できない"

  - id: "TC-003"
    name: "Python 3.11+"
    description: "テストとツールスクリプトはPython 3.11以上を必要とする"
    reason: "pyproject.toml:9 で指定されている"
    impact: "古いPython環境ではテストが実行できない"

  - id: "TC-004"
    name: "Human-in-the-Loop"
    description: "AIは提案・準備にとどめ、最終決定は人間が行う"
    reason: "AIハルシネーションリスクの低減"
    impact: "完全自動化の機能は提供しない"

## 運用制約
operational:
  - id: "OC-001"
    name: "再利用性の優先"
    description: "特定プロダクトに強く結合しない設計"
    reason: "組織全体での利用を想定"
    impact: "汎用的な実装が必要"

  - id: "OC-002"
    name: "ドキュメント必須"
    description: "各ActionにはExampleとInstructionが必要"
    reason: "AGENTS.mdで定義されている必須構成要素"
    impact: "Action追加時は3つのファイルセット（action.yml + example + instruction）が必要"

  - id: "OC-003"
    name: "Dry Run検証必須"
    description: "全てのActionはDry Run検証をパスする必要がある"
    reason: "README.md:94-96 で規定されている"
    impact: "PR作成時やMain Push時に自動検証される"

## セキュリティ制約
security:
  - id: "SC-001"
    name: "権限最小化"
    description: "Actionsは最小限の権限で動作すべき"
    reason: "セキュリティベストプラクティス"
    impact: "必要最小限のtokenとpermissionsのみ使用"

  - id: "SC-002"
    name: "シークレット管理"
    description: "シークレット情報はGitHub Secretsで管理"
    reason: "機密情報の保護"
    impact: "コードやログにシークレットを含めてはならない"

  - id: "SC-003"
    name: "プライバシー配慮"
    description: "テレメトリー収集はオプトアウト可能"
    reason: "プライバシーポリシー（README.md:120-139）"
    impact: "DISABLE_TELEMETRY環境変数をサポートする必要がある"

## 品質制約
quality:
  - id: "QC-001"
    name: "カバレッジ80%"
    description: "テストカバレッジは80%以上を維持"
    reason: "pyproject.toml:38 で設定されている"
    impact: "PRがカバレッジ低下を許容されない"

  - id: "QC-002"
    name: "RuffLint合格"
    description: "コードはRuffルールに準拠"
    reason: "pyproject.toml:41-57 で設定されている"
    impact: "LintエラーがあるとPRがマージできない"

  - id: "QC-003"
    name: "YAML構文正当性"
    description: "全YAMLファイルはパース可能である必要がある"
    reason: "GitHub Actionsの実行要件"
    impact: "YAML構文エラーがあるActionは実行できない"

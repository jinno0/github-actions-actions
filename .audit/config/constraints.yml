version: "2.0"
updated_at: "2026-02-06T22:30:00Z"
updated_by: "audit-run-001"

# === Technical Constraints ===
technical:
  - id: "TC-001"
    name: "Python 3.10+"
    description: "Python 3.10以上で動作する必要がある"
    source: "pytest.iniの存在から推測"
    severity: "hard"

  - id: "TC-002"
    name: "Claude Code CLI on Self-hosted Runner"
    description: "Self-hosted runner上でClaude Code CLIが実行可能である必要がある"
    source: "README.md:83-85, AGENTS.md:5-11"
    severity: "hard"

  - id: "TC-003"
    name: "GitHub Actions YAML syntax"
    description: "全てのaction.ymlは有効なGitHub Actions YAML構文である必要がある"
    source: "AGENTS.md推奨事項"
    severity: "hard"

# === Operational Constraints ===
operational:
  - id: "OC-001"
    name: "Human-in-the-Loop"
    description: "AIはあくまで提案・準備を行い、最終決定権（マージ、デプロイ）は人間が持つ、または人間が設定した閾値に基づく"
    source: "PURPOSE.md:36-38"
    severity: "hard"

  - id: "OC-002"
    name: "Privacy by Design"
    description: "テレメトリーはオプトアウト可能で、リポジトリ名はSHA-256ハッシュ化、コードや機密情報は収集しない"
    source: "README.md:100-119"
    severity: "hard"

  - id: "OC-003"
    name: "Dry Run Validation"
    description: "全てのAI ActionsはDry Runモードで検証可能である必要がある"
    source: "README.md:92-96, AGENTS.md"
    severity: "hard"

# === Quality Constraints ===
quality:
  - id: "QC-001"
    name: "Test Coverage 70%+"
    description: "全コードの70%以上がテストカバレッジである必要がある"
    source: "pytest.ini:--cov-fail-under=70"
    severity: "medium"

  - id: "QC-002"
    name: "No Hallucination Risk"
    description: "AIハルシネーションリスクを考慮し、完全な無人運用は行わない"
    source: "PURPOSE.md:64"
    severity: "hard"

  - id: "QC-003"
    name: "Reusability Priority"
    description: "特定プロダクトに強く結合しすぎたロジックは避け、再利用性を重視する"
    source: "PURPOSE.md:65"
    severity: "medium"

# === Security Constraints ===
security:
  - id: "SC-001"
    name: "No Code/Secret Collection"
    description: "テレメトリーでコードや機密情報を収集しない"
    source: "README.md:105"
    severity: "hard"

  - id: "SC-002"
    name: "Opt-out Telemetry"
    description: "DISABLE_TELEMETRY環境変数で無効化可能"
    source: "README.md:103, 113-117"
    severity: "hard"

# === Resource Constraints ===
resource:
  - id: "RC-001"
    name: "Test Execution Time"
    description: "テストは合理的な時間で完了する必要がある"
    source: "pytest.ini設定推測"
    severity: "medium"

  - id: "RC-002"
    name: "Template Maintenance"
    description: "テンプレートはaction.yml外に切り出し、メンテナンス性を確保する"
    source: "AGENTS.md:86-148"
    severity: "medium"

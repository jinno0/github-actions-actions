version: "2.0"
updated_at: "2026-02-07T00:00:00Z"
updated_by: "audit-run-001"

# === 技術的制約 ===
technical:
  runtime_environment:
    - "Self-hosted GitHub Actions Runner"
    - "Claude Code CLIがインストールされていること"
    - "Python 3.8+またはNode.js 16+（Actionによる）"

  compatibility:
    - "GitHub Actions YAML構文"
    - "Linux/macOS環境（self-hosted runnerの標準）"

  dependencies:
    external:
      - name: "Claude Code CLI"
        required: true
        reason: "全AI Actionの中核エンジン"
      - name: "gh CLI"
        required: false
        reason: "GitHub API操作の一部で使用"
      - name: "yamllint"
        required: false
        reason: "YAML検証（action-fixerなどで使用）"

# === セキュリティ制約 ===
security:
  data_handling:
    - "PII（個人識別情報）を収集しない"
    - "機情報（シークレット、トークン）をロギングしない"
    - "リポジトリ名はSHA-256ハッシュ（先頭16文字）で匿名化"

  permissions:
    required:
      - "contents:write（変更のコミット用）"
      - "pull-requests:write（PR操作用）"
      - "issues:write（コメント用）"

  privacy:
    opt_out: true
    method: "DISABLE_TELEMETRY環境変数"
    documentation: "README.md:103-117, docs/telemetry.md"

# === 運用制約 ===
operational:
  human_in_the_loop:
    - "AIは提案・準備を行い、最終決定権は人間が持つ"
    - "自動マージは閾値（LGTM score）ベースで実行"

  monitoring:
    - "テレメトリー収集（実行ステータス、エラー）"
    - "受入率追跡（AIレビュー品質）"

  error_handling:
    - "Dry Runモードでの検証必須"
    - "エラー時は適切なログと通知"

# === 品質制約 ===
quality:
  documentation:
    - "全ActionにREADME.md必須"
    - "全Actionにinstructions/*.md必須"
    - "全Actionにexamples/*.yml必須"

  testing:
    - "Dry Runモードでの構造チェック"
    - "YAML構文検証"
    - "モック実行テスト"

  code_style:
    python: "PEP 8準拠（推奨）"
    typescript: "厳格モード（推奨）"
    yaml: "GitHub Actionsベストプラクティス"

# === パフォーマンス制約 ===
performance:
  execution_time:
    target: "Action実行は5分以内（推奨）"
    timeout: "GitHub Actionsのデフォルト（6時間）"

  resource_usage:
    memory: "最小2GB RAM"
    cpu: "最小2コア"

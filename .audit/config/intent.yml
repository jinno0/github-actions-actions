version: "2.0"
updated_at: "2026-02-03T21:30:00Z"
updated_by: "audit-run-cycle4"

# === Mission（不明時は仮定で埋める）===
mission:
  target_user: "GitHub Actionsユーザー"
  provided_value: "再利用可能なGitHub Actionsコンポジットアクションを提供"
  desired_state: "品質が高く、文書化された、テストされたアクションが利用可能"

# === Assumptions（重要：仮定した前提を必ず記録）===
assumptions:
  - id: "ASM-001"
    field: "mission.target_user"
    value: "GitHub ActionsでCI/CDパイプラインを構築するDevOpsエンジニア"
    reason: "リポジトリ名がactionsで終わるため"
    confidence: "high"
    status: "confirmed"
    verified_at: "2026-02-03T08:34:34Z"
    verification_evidence: "構造的テストと統合テストでDevOpsエンジニア向けのActionsが正常に動作"

  - id: "ASM-002"
    field: "quality_attributes.testing.structural"
    value: "構造的テストカバレッジ >= 80%"
    reason: "一般的なOSS品質基準"
    confidence: "high"
    status: "confirmed"
    verified_at: "2026-02-03T11:28:13Z"
    verification_evidence: "94.49%構造的テストカバレッジ維持 (目標80%)"

  - id: "ASM-003"
    field: "quality_attributes.testing.integration"
    value: "統合テストカバレッジ >= 50%"
    reason: "前回実行のフィードバックで追加された品質属性"
    confidence: "high"
    status: "confirmed"
    verified_at: "2026-02-03T11:28:13Z"
    verification_evidence: "100%統合テストカバレッジ達成 (13/13 Actions)"

  - id: "ASM-004"
    field: "quality_attributes.testing.runtime"
    value: "ランタイムテスト（actツール）の導入は次フェーズ"
    reason: "Phase 2bで提案された次のステップ"
    confidence: "medium"
    status: "proposed"
    proposed_action: "actツール導入による実際のAction実行テスト"
    evidence: "feedback_to_auditor.ymlのnext_cycle_suggestionsに記載"

# === Quality Attributes（検証方法とセット）===
quality_attributes:
  - id: "QA-001"
    name: "構造的テストカバレッジ"
    target: ">= 80%"
    verification:
      type: "measurement"
      command: "pytest tests/ --cov=actions --cov-report=json"
      criteria:
        operator: ">="
        value: 80
        unit: "%"
      interpretation:
        success_means: "コードの80%以上が構造的テストで実行された"
        failure_means: "テストされていないコードパスが20%以上ある"
        warning: "カバレッジが高くてもアサーションが弱ければ意味がない"

  - id: "QA-002"
    name: "統合テストカバレッジ"
    target: "100%"
    verification:
      type: "measurement"
      command: "ls tests/integration/test_*_integration.py | wc -l"
      criteria:
        operator: "=="
        value: 13
        unit: "Actions"
      interpretation:
        success_means: "すべてのActions (13) が統合テストで検証されている"
        failure_means: "統合テストで検証されていないActionsが存在する"
        warning: "統合テストはYAML構造検証レベルであり、実際の実行テストではない"

  - id: "QA-003"
    name: "アクションの文書化"
    target: "100%"
    verification:
      type: "measurement"
      command: "find actions -name 'action.yml' | wc -l"
      criteria:
        operator: "=="
        value: 13
        unit: "Files"
      interpretation:
        success_means: "すべてのアクションがaction.ymlで適切に文書化されている"
        failure_means: "文書化されていないアクションが存在する"

  - id: "QA-004"
    name: "TypeScript型安全性"
    target: "strict mode"
    verification:
      type: "measurement"
      command: "npm run type-check"
      criteria:
        operator: "=="
        value: 0
        unit: "errors"
      interpretation:
        success_means: "TypeScriptコンパイルエラーがない"
        failure_means: "型エラーが存在する"

# === Core Functions（存在意義の主張）===
core_functions:
  - id: "CF-001"
    claim: "13の再利用可能なGitHub Actionsを提供"
    source: "README.md:8"
    testable: true
    verification_method: "actions/*/action.ymlファイルの存在確認"
    status: "verified"
    last_verified_at: "2026-02-03T11:28:13Z"

  - id: "CF-002"
    claim: "各Actionに導入手順（Instructions）を提供"
    source: "README.md:50-56"
    testable: true
    verification_method: "instructions/*.mdファイルの存在確認"
    status: "verified"
    last_verified_at: "2026-02-03T11:28:13Z"

  - id: "CF-003"
    claim: "各Actionに利用例（Examples）を提供"
    source: "README.md:52-53"
    testable: true
    verification_method: "examples/*.ymlファイルの存在確認"
    status: "verified"
    last_verified_at: "2026-02-03T11:28:13Z"

  - id: "CF-004"
    claim: "構造的テストで94.49%のカバレッジを達成"
    source: "TESTING.md:113"
    testable: true
    verification_method: "pytest --covを実行"
    status: "verified"
    last_verified_at: "2026-02-03T11:28:13Z"

  - id: "CF-005"
    claim: "統合テストで100%のアクションカバレッジを達成"
    source: "TESTING.md:118"
    testable: true
    verification_method: "統合テストファイル数のカウント"
    status: "verified"
    last_verified_at: "2026-02-03T11:28:13Z"

  - id: "CF-006"
    claim: "AIレビューの品質メトリクス（受入率）を追跡"
    source: "README.md:123-124"
    testable: true
    verification_method: "scripts/calculate_acceptance_rate.pyの存在確認"
    status: "verified"
    last_verified_at: "2026-02-03T11:28:13Z"

non_goals:
  - "GitHub Actionsランナーのホスティング"
  - "サードパーティサービスの統合（明示的に文書化されたものを除く）"
  - "ランタイムテスト（現在は構造的テストとYAML検証のみ）"

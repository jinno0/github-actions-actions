version: "2.0"
updated_at: "2026-02-01T15:10:00Z"
updated_by: "audit-run-001"

# === Mission ===
mission:
  target_user: "GitHub組織の開発チーム（Self-hosted runner環境）"
  provided_value: "Claude Code CLIを活用したAIネイティブなGitHub Actionsを提供し、開発効率とコード品質の向上を自動化"
  desired_state: |
    組織内の複数リポジトリでAI Actionsが標準的に採用され、
    人間が本質的な設計や意思決定に集中できる時間が増加した状態

# === Assumptions ===
assumptions:
  - id: "ASM-001"
    field: "mission.target_user"
    value: "GitHub組織の開発チーム（Self-hosted runner環境）"
    reason: "PURPOSE.md及びSYSTEM_CONSTITUTION.mdでSelf-hosted runner前提の記述あり"
    confidence: "high"

  - id: "ASM-002"
    field: "mission.technical_requirements"
    value: "Composite Actionsのみ（Docker/JS Actionsは除外）"
    reason: "SYSTEM_CONSTITUTION.mdで明示的にComposite Actionsのみに焦点を当てると記載"
    confidence: "high"

  - id: "ASM-003"
    field: "quality.target_test_coverage"
    value: ">= 80%"
    reason: "業界標準のOSS品質基準を適用"
    confidence: "medium"

  - id: "ASM-004"
    field: "runtime.environment"
    value: "Self-hosted Linux runner with Claude Code CLI installed"
    reason: "README.md及びPURPOSE.mdで前提として言及"
    confidence: "high"

  - id: "ASM-005"
    field: "quality.documentation_coverage"
    value: "100% (全Actionにdescriptionと使用例必須)"
    reason: "SYSTEM_CONSTITUTION.mdでドキュメント駆動開発が必須事項として記載"
    confidence: "high"

# === Core Functions ===
core_functions:
  - id: "CF-001"
    claim: "PRのコードレビューをAIが実行し、問題を自動修正できる"
    source: "README.md:14, actions/review-and-merge/action.yml:1"
    testable: true

  - id: "CF-002"
    claim: "Markdown仕様書からコードを自動生成できる"
    source: "README.md:15, actions/spec-to-code/action.yml:1"
    testable: true

  - id: "CF-003"
    claim: "Workflowのエラーを検知し、AIが自動修正できる"
    source: "README.md:16, actions/action-fixer/action.yml:1"
    testable: true

  - id: "CF-004"
    claim: "自然言語の指示に基づき、既存コードをリファクタリングできる"
    source: "README.md:17, actions/auto-refactor/action.yml:1"
    testable: true

  - id: "CF-005"
    claim: "コード変更を検知し、README等のドキュメントを自動更新できる"
    source: "README.md:23, actions/auto-document/action.yml:1"
    testable: true

  - id: "CF-006"
    claim: "コミット履歴から人間が読みやすいリリースノートを生成できる"
    source: "README.md:24, actions/release-notes-ai/action.yml:1"
    testable: true

  - id: "CF-007"
    claim: "PRの条件を満たす場合に自動マージ（squash/merge/rebase対応）できる"
    source: "README.md:30, actions/auto-merge/action.yml:1"
    testable: true

  - id: "CF-008"
    claim: "PRの競合をAIが自動解決しながらリベースできる"
    source: "README.md:31, actions/auto-rebase/action.yml:1"
    testable: true

  - id: "CF-009"
    claim: "AIレビュー後、CIパス時に自動マージ（リトライ機能付き）できる"
    source: "README.md:32, actions/review-auto-merge/action.yml:1"
    testable: true

  - id: "CF-010"
    claim: "ドラフトPRを自動的にレビュー準備完了に変更できる"
    source: "README.md:33, actions/publish-pr/action.yml:1"
    testable: true

  - id: "CF-011"
    claim: "複数のPRを一括マージできる"
    source: "README.md:39, actions/bulk-merge-prs/action.yml:1"
    testable: true

  - id: "CF-012"
    claim: "複数のPRを一括リベースできる"
    source: "README.md:40, actions/bulk-rebase-prs/action.yml:1"
    testable: true

  - id: "CF-013"
    claim: "PRをスキャンし、AIレビューキューに自動登録できる"
    source: "README.md:46, actions/pr-review-enqueuer/action.yml:1"
    testable: true

# === Quality Attributes ===
quality_attributes:
  - id: "QA-001"
    name: "テストカバレッジ"
    target: ">= 80%"
    verification:
      type: "measurement"
      command: "pytest --cov=actions --cov-report=term-missing"
      criteria:
        operator: ">="
        value: 80
        unit: "%"
      interpretation:
        success_means: "コードの80%以上がテストで実行され、主要な機能パスが検証されている"
        failure_means: "テストされていないコードパスが20%以上あり、予期せぬ動作変更のリスクがある"
        warning: "カバレッジが高くてもアサーションが弱ければ意味がない"

  - id: "QA-002"
    name: "ドキュメントカバレッジ"
    target: "100%"
    verification:
      type: "structural"
      command: "find actions -name 'action.yml' -exec sh -c 'grep -q \"description:\" \"$1\" || echo \"$1 lacks description\"' _ {} \\;"
      criteria:
        operator: "=="
        value: 0
        unit: "files lacking description"
      interpretation:
        success_means: "全てのActionに適切なdescriptionがあり、利用者が理解できる"
        failure_means: "説明不足のActionが存在し、利用価値が低下している"

  - id: "QA-003"
    name: "Dry Run検証"
    target: "全ActionがDry Runモードで検証可能"
    verification:
      type: "functional"
      command: "pytest tests/ -k dry_run -v"
      criteria:
        operator: "=="
        value: 0
        unit: "failed tests"
      interpretation:
        success_means: "全てのActionが実際の実行環境なしで構造チェックが可能"
        failure_means: "一部Actionが検証不可能で、品質保証が不十分"

  - id: "QA-004"
    name: "YAML構文妥当性"
    target: "全てのaction.ymlが有効なYAML"
    verification:
      type: "syntax"
      command: "find actions -name 'action.yml' -exec yamllint {} \\;"
      criteria:
        operator: "=="
        value: 0
        unit: "syntax errors"
      interpretation:
        success_means: "全てのAction定義がYAMLとして有効"
        failure_means: "構文エラーがあり、GitHub Actionsで実行できない"

# === Non-Goals ===
non_goals:
  - "再利用可能Workflowテンプレートの提供（github-actions-templatesの責務）"
  - "アプリケーション固有のCI/CD設定（汎用的なActionのみ提供）"
  - "Runner管理スクリプト（github-actions-hubの責務）"
  - "Docker Container Actions / JavaScript Actions（Composite Actionsのみ）"
  - "完全に無人での運用（AIのハルシネーションリスクを考慮）"

version: "2.0"
updated_at: "2026-02-04T00:54:00Z"
updated_by: "audit-run-001"

# === Mission ===
mission:
  target_user: "GitHub organization using self-hosted runners with Claude Code CLI"
  provided_value: "AI-native GitHub Actions for context-aware automation (code review, auto-fix, documentation generation)"
  desired_state: "Organization-wide adoption of AI actions that reduce manual work while maintaining human-in-the-loop oversight"

# === Assumptions ===
assumptions:
  - id: "ASM-001"
    field: "mission.target_user"
    value: "GitHub organization using self-hosted runners with Claude Code CLI"
    reason: "README.md explicitly mentions self-hosted runners and Claude Code CLI as prerequisites"
    confidence: "high"

  - id: "ASM-002"
    field: "quality_attributes.test_coverage"
    value: ">= 70%"
    reason: "pytest.ini specifies --cov-fail-under=70"
    confidence: "high"

  - id: "ASM-003"
    field: "quality_attributes.acceptance_rate"
    value: ">= 70%"
    reason: "README.md mentions 'Acceptance Rate' goal of >= 70% for AI review quality"
    confidence: "high"

  - id: "ASM-004"
    field: "mission.telemetry_opt_out"
    value: "Users can opt-out via DISABLE_TELEMETRY environment variable"
    reason: "README.md section on telemetry explicitly mentions opt-out capability"
    confidence: "high"

# === Core Functions ===
core_functions:
  - id: "CF-001"
    claim: "AI-powered PR review with automatic merging (review-and-merge)"
    source: "README.md:14"
    testable: true

  - id: "CF-002"
    claim: "Spec-to-code generation from Markdown specifications (spec-to-code)"
    source: "README.md:15"
    testable: true

  - id: "CF-003"
    claim: "AI-based workflow error fixing (action-fixer)"
    source: "README.md:16"
    testable: true

  - id: "CF-004"
    claim: "Natural language-guided refactoring (auto-refactor)"
    source: "README.md:17"
    testable: true

  - id: "CF-005"
    claim: "Automatic documentation updates (auto-document)"
    source: "README.md:23"
    testable: true

  - id: "CF-006"
    claim: "AI-generated release notes (release-notes-ai)"
    source: "README.md:24"
    testable: true

  - id: "CF-007"
    claim: "Quality metrics tracking with acceptance rate calculation"
    source: "README.md:122-140"
    testable: true

  - id: "CF-008"
    claim: "Dry-run validation for all actions"
    source: "README.md:94"
    testable: true

# === Quality Attributes ===
quality_attributes:
  - id: "QA-001"
    name: "Test Coverage"
    target: ">= 70%"
    verification:
      type: "measurement"
      command: "pytest --cov=. --cov-fail-under=70"
      criteria:
        operator: ">="
        value: 70
        unit: "%"
      interpretation:
        success_means: "コードの70%以上がテストで実行された"
        failure_means: "テストされていないコードパスが30%以上ある"
        warning: "カバレッジが高くてもアサーションが弱ければ意味がない"

  - id: "QA-002"
    name: "AI Review Acceptance Rate"
    target: ">= 70%"
    verification:
      type: "measurement"
      command: "python scripts/calculate_acceptance_rate.py --time-period 7d"
      criteria:
        operator: ">="
        value: 70
        unit: "%"
      interpretation:
        success_means: "AIレビュー提案の70%以上が人間に受け入れられている"
        failure_means: "AIレビューの品質が低く、人間に拒否されている"
        warning: "受入率が高くても提案数が少なければ効果は薄い"

  - id: "QA-003"
    name: "YAML Syntax Validity"
    target: "100%"
    verification:
      type: "validation"
      command: "find . -name '*.yml' -o -name '*.yaml' | xargs yamllint"
      criteria:
        operator: "=="
        value: 0
        unit: "errors"
      interpretation:
        success_means: "全てのYAMLファイルが構文的に正しい"
        failure_means: "YAMLファイルに構文エラーがあり、GitHub Actionsが実行できない"
        warning: "yamllintがインストールされている必要がある"

non_goals:
  - "単なるシェルスクリプトのラッパー（既存のActionsで十分なもの）"
  - "完全に無人での運用（AIのハルシネーションリスクを考慮）"
  - "特定プロダクトに強く結合しすぎたロジック（再利用性を重視）"

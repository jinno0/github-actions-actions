version: "2.0"
updated_at: "2026-02-03T23:20:15Z"
updated_by: "audit-run-initial"

# === Mission ===
mission:
  target_user: "組織内の開発チーム（Self-hosted GitHub Actions Runnerを使用）"
  provided_value: "AIネイティブなGitHub Actionsを通じた開発効率と品質の向上"
  desired_state: "組織全体のリポジトリで、AIによるコードレビュー・自動修正・ドキュメント生成が標準的に利用されている状態"

# === Core Functions ===
# このリポジトリが「できること」を検証可能な形で定義
core_functions:
  - id: "CF-001"
    claim: "13種類のAI Actionsを提供しており、それぞれがexamplesとinstructionsを持つ"
    source: "README.md:8-47"
    testable: true

  - id: "CF-002"
    claim: "全てのActionがComposite Actionとして実装されており、self-hosted runner上のClaude Code CLIを使用する"
    source: "README.md:82-86, SYSTEM_CONSTITUTION.md:29-31"
    testable: true

  - id: "CF-003"
    claim: "各ActionはDry Runモードで自動検証される"
    source: "AGENTS.md:278-376"
    testable: true

  - id: "CF-004"
    claim: "AIレビューの品質メトリクス（受入率）を追跡できる"
    source: "README.md:121-139"
    testable: true

# === Assumptions ===
# 情報不足時に仮定した前提を記録
assumptions:
  - id: "ASM-001"
    field: "mission.target_user_scale"
    value: "中規模〜大規模組織（10〜1000リポジトリ）"
    reason: "「組織全体」「ハブ」「複数のリポジトリ」といった記述から推測"
    confidence: "medium"

  - id: "ASM-002"
    field: "quality_attributes.adoption_rate"
    value: "Phase 3（安定化・導入期）"
    reason: "PURPOSE.md:22-26 で Phase 3 進行中と明記されているため"
    confidence: "high"

  - id: "ASM-003"
    field: "environment.runner_availability"
    value: "Self-hosted runnerが構築済みであり、Claude Code CLIがインストールされている"
    reason: "README.md:82-86 で前提条件として明記されているため"
    confidence: "high"

  - id: "ASM-004"
    field: "quality_attributes.test_coverage"
    value: "各Actionに対応するtests/が存在し、構造チェック・YAML構文チェックが実装されている"
    reason: "AGENTS.md:278-376 でDry Run検証が言及されていることからの推測"
    confidence: "medium"

# === Quality Attributes ===
quality_attributes:
  - id: "QA-001"
    name: "Action構造の完全性"
    target: "100%"
    verification:
      type: "structural"
      command: "for action in actions/*/; do name=$(basename \"$action\"); [ -f \"$action/action.yml\" ] && [ -f \"examples/${name}-example.yml\" ] && [ -f \"instructions/${name}.md\" ] && echo \"✓ $name\" || echo \"✗ $name\"; done"
      criteria:
        operator: "="
        value: 100
        unit: "%"
      interpretation:
        success_means: "全てのActionがaction.yml, example, instructionの3点セットを持っている"
        failure_means: "一部のActionにドキュメントまたは利用例が欠けている"
        warning: "ファイルが存在しても、内容が最新である保証はない"

  - id: "QA-002"
    name: "YAML構文の妥当性"
    target: "0 エラー"
    verification:
      type: "syntax"
      command: "find actions -name 'action.yml' -exec python3 -c \"import yaml; yaml.safe_load(open('{}'))\" \\;"
      criteria:
        operator: "="
        value: 0
        unit: "errors"
      interpretation:
        success_means: "全てのaction.ymlが有効なYAMLとしてパース可能"
        failure_means: "構文エラーを含むaction.ymlが存在する"
        warning: "パース可能でも、GitHub Actionsのスキーマに準拠している保証はない"

  - id: "QA-003"
    name: "テレメトリー実装の Coverage"
    target: "全Actionが匿名テレメトリーを収集またはオプトアウト可能"
    verification:
      type: "grep"
      command: "grep -r 'telemetry\\|DISABLE_TELEMETRY' actions/ | wc -l"
      criteria:
        operator: ">="
        value: 1
        unit: "implementations"
      interpretation:
        success_means: "テレメトリー収集の仕組みが実装されている"
        failure_means: "テレメトリー実装が見つからない（またはREADME.md:98-119の記述が古い）"

  - id: "QA-004"
    name: "AIレビュー受入率の追跡可能性"
    target: "メトリクス計算スクリプトが実行可能"
    verification:
      type: "executable"
      command: "python3 /home/jinno/github-actions-actions/scripts/calculate_acceptance_rate.py --help"
      criteria:
        operator: "="
        value: 0
        unit: "exit_code"
      interpretation:
        success_means: "受入率計算スクリプトが正常に動作する"
        failure_means: "スクリプトが存在しないか、実行時にエラーが発生する"

# === Non-Goals ===
non_goals:
  - "再利用可能Workflowテンプレートの提供（github-actions-templatesの責務）"
  - "アプリケーション固有のCI/CD設定"
  - "Runner管理・セットアップ（github-actions-hubの責務）"
  - "Docker container actions, JavaScript actions（Composite Actionsのみに焦点）"

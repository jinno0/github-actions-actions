version: "2.0"
updated_at: "2026-02-07T03:00:00Z"
updated_by: "audit-run-2026-02-07T03:00:00Z"

# === Mission ===
mission:
  target_user: "GitHub組織の開発チーム、DevOpsエンジニア、およびAIネイティブ開発に関心のあるエンジニア"
  provided_value: "Claude Code CLIを活用した高度なGitHub Actions自動化ツール群を提供し、コードレビュー、修正、ドキュメント生成などのAI支援を実現"
  desired_state: "組織内の複数リポジトリで採用され、AIが担当する雑務が自動化されることで、開発者が本質的な設計・意思決定に集中できる状態"

# === Core Functions (本質的機能) ===
core_functions:
  - id: "CF-001"
    claim: "AIによるPRコードレビューと自動修正ができる"
    source: "README.md:14, ACTIONS.md:13"
    testable: true
    verification_method: "review-and-merge Actionを実際のPRで実行し、レビューコメントと修正内容を確認"

  - id: "CF-002"
    claim: "Markdown仕様書からコードを生成できる"
    source: "README.md:15, ACTIONS.md:48"
    testable: true
    verification_method: "spec-to-code Actionでサンプル仕様書からコードを生成し、構文チェック"

  - id: "CF-003"
    claim: "コード変更に合わせてドキュメントを自動更新できる"
    source: "README.md:23, ACTIONS.md:97"
    testable: true
    verification_method: "auto-document Actionを実行し、READMEやAPIドキュメントが更新されることを確認"

  - id: "CF-004"
    claim: "GitHub Actionsワークフローのエラーを自動検出・修正できる"
    source: "README.md:16, ACTIONS.md:144"
    testable: true
    verification_method: "action-fixer Actionで不正なYAMLを修正できるか確認"

  - id: "CF-005"
    claim: "CI上でテストカバレッジ >= 70% を維持している"
    source: "README.md:100, pytest.ini:22"
    testable: true
    verification_method: "pytest --cov を実行し、カバレッジ率を測定"

  - id: "CF-006"
    claim: "301のテストケースが存在し、全てのActionの構造検証が行われている"
    source: "pytest collect出力"
    testable: true
    verification_method: "pytest --collect-only でテスト数をカウント"

# === Assumptions（仮定の記録）===
assumptions:
  - id: "ASM-001"
    field: "mission.target_user"
    value: "中〜大規模なGitHub組織の開発チーム"
    reason: "README.mdで「GitHub組織全体の開発効率」という記述があり、複数リポジトリでの採用を想定しているため"
    confidence: "high"

  - id: "ASM-002"
    field: "environment.runner"
    value: "Self-hosted GitHub Actions Runner (Ubuntu 20.04+, 2GB RAM, 2 CPU cores)"
    reason: "README.md:83, ACTIONS.md:236-240で明記されている"
    confidence: "high"

  - id: "ASM-003"
    field: "dependencies.claude_cli"
    value: "Claude Code CLI (@anthropic-ai/claude-code-cli) がインストール済み"
    reason: "全Actionの実行前提としてREADME.mdとACTIONS.mdで明記"
    confidence: "high"

  - id: "ASM-004"
    field: "quality.target_acceptance_rate"
    value: "AIレビュー受入率 >= 70%"
    reason: "README.md:148で目標値として記載されている"
    confidence: "high"

  - id: "ASM-005"
    field: "quality.target_test_coverage"
    value: "テストカバレッジ >= 70%"
    reason: "README.md:100, pytest.ini:22で目標として設定されている"
    confidence: "high"

  - id: "ASM-006"
    field: "usage.adoption_status"
    value: "パイロット導入段階（2つのプロジェクトで採用済み）"
    reason: "README.md:179で「Current adopters: 2 pilot projects」と記載"
    confidence: "medium"

  - id: "ASM-007"
    field: "development.current_phase"
    value: "Phase 3: Stabilization & Adoption (進行中)"
    reason: "PURPOSE.md:22で明記"
    confidence: "high"

# === Quality Attributes（品質属性と検証方法）===
quality_attributes:
  - id: "QA-001"
    name: "テストカバレッジ"
    target: ">= 70%"
    verification:
      type: "measurement"
      command: "cd /home/jinno/github-actions-actions && pytest --cov=. --cov-report=json --cov-fail-under=70"
      criteria:
        operator: ">="
        value: 70
        unit: "%"
      interpretation:
        success_means: "コードの70%以上がテストで実行され、主要な機能が網羅されている"
        failure_means: "テストされていないコードパスが30%以上あり、リグレッションリスクがある"
        warning: "カバレッジが高くてもアサーションの質が低ければ意味がない"

  - id: "QA-002"
    name: "YAML構文妥当性"
    target: "100%の action.yml が有効"
    verification:
      type: "validation"
      method: "各Actionのaction.ymlをYAMLパーサーで検証"
      criteria:
        operator: "=="
        value: 100
        unit: "%"
      interpretation:
        success_means: "全てのActionがGitHub Actionsで正しく読み込める"
        failure_means: "一部のActionが使用できない構文エラーを含んでいる"

  - id: "QA-003"
    name: "Action構造完全性"
    target: "全Actionが必須フィールドを保持"
    verification:
      type: "validation"
      method: "pytest tests/integration/test_action_structure.py"
      criteria:
        operator: "=="
        value: 0
        unit: "エラー数"
      interpretation:
        success_means: "全Actionがname, description, runs等の必須フィールドを正しく定義している"
        failure_means: "一部のActionにメタデータが欠落しており、UXが低下している"

  - id: "QA-004"
    name: "ドキュメントカバレッジ"
    target: "全ActionにREADMEと導入ガイドが存在"
    verification:
      type: "validation"
      method: "各ActionのREADME.mdとinstructions/*.mdの存在確認"
      criteria:
        operator: "=="
        value: 100
        unit: "%"
      interpretation:
        success_means: "全てのActionが利用者に向けたドキュメントを持っている"
        failure_means: "一部のActionの使い方が不明瞭で、導入の障壁がある"

  - id: "QA-005"
    name: "AIレビュー品質（受入率）"
    target: ">= 70%"
    verification:
      type: "measurement"
      command: "python scripts/calculate_acceptance_rate.py --time-period 7d"
      criteria:
        operator: ">="
        value: 70
        unit: "%"
      interpretation:
        success_means: "AIレビューの70%以上が人間に受け入れられており、実用的な品質"
        failure_means: "AIレビューの多くが拒否/修正されており、精度改善が必要"
        warning: "ベースライン策定中のため、現在はデータ収集段階"

# === Non-Goals（非目標）===
non_goals:
  - "単なるシェルスクリプトのラッパー（既存のActionsで十分なものは作らない）"
  - "完全に無人での運用（AIのハルシネーションリスクを考慮し、Human-in-the-Loopを維持）"
  - "特定プロダクトに強く結合しすぎたロジック（再利用性を重視）"
  - "GitHub-hosted runnerでの動作（Self-hosted runner + Claude Code CLI専用）"

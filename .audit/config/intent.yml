version: "2.0"
updated_at: "2026-02-02T11:10:00Z"
updated_by: "audit-run-002"

# === Mission ===
mission:
  target_user: "組織内の開発チーム（Self-hosted GitHub Actions Runnerを運用する企業）"
  provided_value: "AIネイティブなGitHub Actionsを提供し、開発ワークフローの自動化・効率化・品質向上を実現する"
  desired_state: |
    組織全体の開発ライフサイクルにおいて、AIによるコードレビュー、自動修正、ドキュメント生成が
    標準的に活用され、開発者が本質的な設計や意思決定に集中できる状態

# === Assumptions（重要：仮定した前提を必ず記録）===
assumptions:
  - id: "ASM-001"
    field: "mission.target_user"
    value: "Self-hosted Runnerを運用する企業の開発チーム"
    reason: "README.md で Self-hosted runner 上の Claude Code CLI を前提としているため"
    confidence: "high"

  - id: "ASM-002"
    field: "quality_attributes.test_coverage"
    value: ">= 70%"
    reason: "pytest.ini で --cov-fail-under=70 と設定されているため"
    confidence: "high"

  - id: "ASM-003"
    field: "deployment_model"
    value: "GitHub Marketplace ではなく、内部 actions ディレクトリから直接利用"
    reason: "README.md で examples/ ディレクトリの .yml を .github/workflows/ にコピーするよう説明しているため"
    confidence: "medium"

  - id: "ASM-004"
    field: "target_scale"
    value: "組織内の複数のリポジトリ（1〜1000リポジトリ規模）"
    reason: "ADOPTION_GUIDE.md が存在し、組織導入を想定しているため。小規模(1)〜大規模(1000)まで対応"
    confidence: "medium"
    verified: "needs_revision" # Updated based on feedback feedback_to_auditor.yml

  - id: "ASM-005"
    field: "claude_cli_availability"
    value: "Self-hosted runner に Claude Code CLI がインストール済み"
    reason: "全アクションが claude コマンドを直接呼び出しているため"
    confidence: "high"

# === Core Functions（このリポジトリの本質的機能）===
core_functions:
  - id: "CF-001"
    claim: "AIによるコードレビューと自動マージが可能"
    source: "README.md:14, actions/review-and-merge/action.yml"
    testable: true
    verification_method: "Dry Runモック実行"

  - id: "CF-002"
    claim: "Markdown仕様書からコードを生成可能"
    source: "README.md:15, actions/spec-to-code/action.yml"
    testable: true
    verification_method: "テンプレートと構造検証"

  - id: "CF-003"
    claim: "WorkflowエラーをAIが自動検知・修正可能"
    source: "README.md:16, actions/action-fixer/action.yml"
    testable: true
    verification_method: "Dry Runモック実行"

  - id: "CF-004"
    claim: "全アクションがDry Runモードで検証可能"
    source: "README.md:74, AGENTS.md: Dry Run検証セクション"
    testable: true
    verification_method: "pytestによる構造チェック"

# === Quality Attributes ===
quality_attributes:
  - id: "QA-001"
    name: "テストカバレッジ"
    target: ">= 70%"
    verification:
      type: "measurement"
      command: "pytest --cov=. --cov-fail-under=70"
      criteria:
        operator: ">="
        value: 70
        unit: "%"
      interpretation:
        success_means: "コードの70%以上がテストで実行される"
        failure_means: "pytest.ini の基準値を下回る"
        warning: "現在23%のため大幅な改善が必要"

  - id: "QA-002"
    name: "アクション構造の整合性"
    target: "全アクションが標準構造に従う"
    verification:
      type: "structural"
      command: "pytest tests/"
      criteria:
        check_items:
          - "action.ymlが存在"
          - "必須inputsが定義"
          - "テンプレートファイルが読み可能"
          - "YAML構文が有効"
      interpretation:
        success_means: "全アクションが基本構造チェックをパス"
        failure_means: "アクション定義が不適切"

  - id: "QA-003"
    name: "ドキュメント網羅性"
    target: "全アクションに導入ガイドと利用例が存在"
    verification:
      type: "documentation"
      command: "find actions instructions examples -type f | wc -l"
      criteria:
        expected_pairs: 13
        items: "アクション数と対応するドキュメント"
      interpretation:
        success_means: "各アクションにinstructionsとexampleが存在"
        failure_means: "ドキュメントが不足しているアクションがある"

  - id: "QA-004"
    name: "AIセキュリティ"
    target: "プロンプトインジェクション対策とパス検証"
    verification:
      type: "security_check"
      criteria:
        checks:
          - "入力パスの検証が存在"
          - "機密情報の漏洩防止"
          - "危険なコマンド実行の防止"
      interpretation:
        success_means: "セキュリティチェックが実装されている"
        failure_means: "セキュリティリスクがある"

# === Non-Goals ===
non_goals:
  - "GitHub Marketplace での公開（内部利用が前提）"
  - "GitHub-hosted runner での動作（Self-hosted専用）"
  - "完全自動運用（Human-in-the-loopが前提）"
  - "特定言語に強く結合したロジック（汎用性重視）"
  - "Claude Code CLI の同梱（別途インストールが前提）"

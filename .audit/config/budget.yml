version: "1.0"
updated_at: "2026-02-08T00:00:00Z"
updated_by: "audit-run-2026-02-08"

# === 監査実行予算 ===

## スキャン予算
scan_budget:
  max_files_per_run: 150
  max_total_tokens: 100000
  reason: "リポジトリは15 Actions + 設定ファイル・ドキュメントで構成されるため"

## ログ予算
log_budget:
  max_log_entries: 500
  keep_last_n_entries: 300
  reason: "監査履歴の肥大化防止"

## 提案予算
proposal_budget:
  max_prs_per_run: 8
  max_issues_per_run: 15
  reason: "1回の監査で取り扱う課題数の上限"

## 実行記録保持ポリシー（厳守）
retention_policy:
  # execution/runs/ 配下の古い実行記録
  execution_runs:
    max_folders: 3          # 最大3個。4個目が生成された時点で最古を削除
    strategy: "keep_latest"  # 常に最新3個のみ保持
    enforcement: "strict"    # 例外なし。予算超過と同様に即時GC

  # 以下は常に最新のみ（履歴は保持しない）
  always_overwrite:
    - "analysis/as_is.yml"
    - "analysis/gap.yml"
    - "analysis/verification_scenarios.yml"
    - "proposal/roadmap.md"
    - "proposal/changes/*.md"
    - "output/summary.md"
    - "output/next_questions.md"
    - "output/self_score.yml"
    - "output/verification_result.json"

  # Source of Truth（削除禁止・上書き更新のみ）
  never_delete:
    - "config/intent.yml"
    - "config/constraints.yml"
    - "config/budget.yml"

version: "2.0"
run_id: "20260208-151100"
generated_at: "2026-02-08T15:11:00Z"

# === ギャップ分析 ===

## 品質属性のギャップ
quality_gaps:
  - id: "QG-001"
    attribute: "QA-001: テストカバレッジ"
    target: ">= 80%"
    current: "92.99%"
    gap: "なし（超過達成）"
    status: "✅ PASS"
    priority: "none"

  - id: "QG-002"
    attribute: "QA-002: コード品質（Ruff Lint）"
    target: "0 errors"
    current: "未測定"
    gap: "Ruffチェックの実行と結果の記録が必要"
    status: "⚠️ WARNING"
    priority: "medium"
    assumption_dependency: "なし"

  - id: "QG-003"
    attribute: "QA-003: YAML構文チェック"
    target: "全てのaction.ymlが有効"
    current: "14個のaction.ymlが存在（15ディレクトリ中）"
    gap: "一部Actionにaction.ymlが存在しない可能性"
    status: "⚠️ WARNING"
    priority: "medium"
    assumption_dependency: "I-001（一部Actionにaction.ymlがない）"

## コア機能のギャップ
core_function_gaps:
  - id: "FG-001"
    function: "CF-001: review-and-merge"
    gap: "なし"
    status: "✅ IMPLEMENTED"
    evidence: "action.yml, README, examples, instructions が完備"

  - id: "FG-002"
    function: "CF-002: spec-to-code"
    gap: "なし"
    status: "✅ IMPLEMENTED"
    evidence: "action.yml, README, examples, instructions が完備"

  - id: "FG-003"
    function: "CF-003: auto-refactor"
    gap: "なし"
    status: "✅ IMPLEMENTED"
    evidence: "action.yml, README, examples, instructions が完備"

  - id: "FG-004"
    function: "CF-004: auto-document"
    gap: "なし"
    status: "✅ IMPLEMENTED"
    evidence: "action.yml, README, examples, instructions が完備"

  - id: "FG-005"
    function: "CF-005: release-notes-ai"
    gap: "READMEが存在しない"
    status: "⚠️ PARTIAL"
    priority: "low"
    impact: "ユーザーが使用方法を理解しにくい可能性"
    evidence: "actions/release-notes-ai/README.md not found"

  - id: "FG-006"
    function: "CF-006: action-fixer"
    gap: "なし"
    status: "✅ IMPLEMENTED"
    evidence: "action.yml, README, examples, instructions が完備"

## 成功条件のギャップ
success_criteria_gaps:
  - id: "SC-001"
    criteria: "組織内の複数のリポジトリでこれらのActionsが採用される"
    current: "未測定"
    gap: "採用状況の定量的な把握が不足"
    status: "❓ UNKNOWN"
    priority: "high"
    assumption_dependency: "ASM-003（組織内の複数リポジトリが対象）"
    related_unknown: "U-001"

  - id: "SC-002"
    criteria: "「AIに任せられる雑務」が増え、人間が本質的な設計や意思決定に集中できる時間が増加する"
    current: "未測定"
    gap: "時間節約効果の定量的な測定が不足"
    status: "❓ UNKNOWN"
    priority: "medium"
    related_unknown: "U-004"

  - id: "SC-003"
    criteria: "AIの提案に対する修正率（Acceptance Rate）が向上し続ける"
    current: "未測定"
    gap: "Acceptance Rateの追跡と分析が不足"
    status: "❓ UNKNOWN"
    priority: "medium"
    related_unknown: "U-004"

## ドキュメントのギャップ
documentation_gaps:
  - id: "DG-001"
    type: "Action README"
    missing: "release-notes-ai"
    impact: "ユーザーが使用方法を理解するのに時間がかかる"
    priority: "low"
    action_required: "actions/release-notes-ai/README.md の作成"

  - id: "DG-002"
    type: "action.ymlの標準化"
    missing: "7つのAction（auto-merge, auto-rebase, bulk-merge-prs, bulk-rebase-prs, review-auto-merge, publish-pr, pr-review-enqueuer）"
    impact: "これらのActionがGitHub Actions Marketplaceや他のリポジトリで再利用可能でない"
    priority: "medium"
    action_required: "各Actionにaction.ymlを作成するか、使用非推奨を明記"

## テストのギャップ
testing_gaps:
  - id: "TG-001"
    type: "シェルスクリプトのテスト"
    current: "未実施"
    gap: "actions/配下のシェルスクリプトのテストカバレッジが不明"
    impact: "実際のAction本体の品質が保証されていない可能性"
    priority: "medium"
    assumption_dependency: "I-003（カバレッジ対象はscripts/とactions/lib/のみ）"
    related_unknown: "U-005"
    action_required: "シェルスクリプトテストフレームワーク（bats等）の導入とテスト作成"

  - id: "TG-002"
    type: "action.ymlのバリデーション"
    current: "未実施"
    gap: "action.ymlのスキーマバリデーションが行われていない"
    impact: "無効なaction.ymlが混入している可能性"
    priority: "low"
    action_required: "action.ymlの自動バリデーションテストの追加"

## 運用のギャップ
operational_gaps:
  - id: "OG-001"
    type: "Acceptance Rateの追跡"
    current: "スクリプトは存在するが自動化されていない"
    gap: "AI提案の品質トレンドを把握できていない"
    impact: "改善の効果測定ができない"
    priority: "high"
    action_required: "calculate_acceptance_rate.pyの定期実行とダッシュボード化"

  - id: "OG-002"
    type: "採用状況の追跡"
    current: "スクリプトは存在するが手動実行"
    gap: "組織内での採用拡大をリアルタイムで把握できない"
    impact: "成功条件（SC-001）の達成度が不明"
    priority: "high"
    action_required: "scan_adoption.pyのGitHub Actionsワークフロー化と定期実行"

  - id: "OG-003"
    type: "実行パフォーマンスの監視"
    current: "未実施"
    gap: "各Actionの実行時間とリソース使用量を把握していない"
    impact: "パフォーマンス制約（PC-001, PC-002）を遵守できているか不明"
    priority: "medium"
    related_unknown: "U-003"
    action_required: "実行ログの収集と分析"

## セキュリティのギャップ
security_gaps:
  - id: "SG-001"
    type: "パストラバーサル対策"
    current: "一部のActionで実装されている可能性"
    gap: "全てのActionで一貫したパス検証が保証されていない"
    impact: "パストラバーサル攻撃のリスク"
    priority: "high"
    assumption_dependency: "SC-002（パストラバーサル対策が必要）"
    action_required: "全Actionのパス検証ロジックの監査と統一"

  - id: "SG-002"
    type: "シークレット管理"
    current: "ドキュメントで言及されているが実装状況は不明"
    gap: "Claude API Key等のシークレットが適切に管理されているか確認が必要"
    impact: "シークレット漏洩リスク"
    priority: "high"
    assumption_dependency: "SC-003（GitHub Secrets経由で扱う）"
    action_required: "各Actionのシークレット使用状況の監査"

## 優先度別ギャップサマリー
priority_summary:
  high:
    - "OG-001: Acceptance Rateの追跡・自動化"
    - "OG-002: 採用状況の自動追跡"
    - "SG-001: パストラバーサル対策の一貫性"
    - "SG-002: シークレット管理の監査"

  medium:
    - "QG-002: Ruffチェックの実行"
    - "QG-003: action.ymlの標準化"
    - "TG-001: シェルスクリプトのテスト"
    - "OG-003: 実行パフォーマンスの監視"

  low:
    - "FG-005: release-notes-aiのREADME作成"
    - "DG-001: ドキュメントの不完全性"
    - "TG-002: action.ymlのバリデーション"

## 仮定に基づくギャップ
assumption_based_gaps:
  - assumption: "ASM-002: テストカバレッジ目標80%"
    gap: "目標を超過達成しているが、シェルスクリプトを含まない"
    validation_needed: "シェルスクリプトを含む全体のカバレッジを測定"

  - assumption: "ASM-003: 組織内の複数リポジトリが対象"
    gap: "実際の採用状況が不明"
    validation_needed: "組織内リポジトリのスキャンと採用数の把握"

  - assumption: "I-003: カバレッジ対象はscripts/とactions/lib/のみ"
    gap: "actions/のシェルスクリプトがテストされていない可能性"
    validation_needed: "シェルスクリプトテストの導入状況確認"

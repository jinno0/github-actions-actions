version: "2.0"
run_id: "2026-02-08T20:22:29Z"
generated_at: "2026-02-08T20:22:29Z"

# === ギャップ分析: Intent vs Current State ===

summary:
  total_gaps: 5
  critical: 0
  high: 1
  medium: 3
  low: 1
  intent_achievement_score: 85  # /100

gaps:
  - id: "GAP-001"
    severity: "high"
    category: "quality_attributes"
    affected_qa: "QA-003 (AIレビュー受入率)"
    intent:
      target: "AIレビュー受入率 >= 70%"
      source: "intent.yml:123-134"
    current_state:
      actual: "75.0% (3/4件)"
      source: "claims.ndjson C-006, C-007"
      note: "目標は達成しているがサンプル数が少ない"
    gap_description: "受入率は目標を超えているが、サンプル数4件 << 目標20件"
    impact: "統計的に有意な評価ができない。AIレビューの品質を実証するエビデンスが不十分"
    confidence: "high"
    assumptions:
      - id: "ASM-004"
        description: "AIレビュー受入率が向上し続けることが成功状態"
        confidence: "medium"

  - id: "GAP-002"
    severity: "medium"
    category: "code_coverage"
    affected_qa: "QA-001 (テストカバレッジ)"
    intent:
      target: "テストカバレッジ >= 80%"
      source: "intent.yml:93-106"
    current_state:
      actual: "88.31% (全体)"
      breakdown:
        - "acceptance_tracker.py: 88.89% (6 gaps)"
        - "env_config.py: 47.83% (最低)"
        - "test_data_collection.py: 0% (ユーティリティ)"
      source: "claims.ndjson C-001, C-019, C-020, C-021"
    gap_description: "全体としては目標達成だが、env_config.pyが47.83%と低い"
    impact: "設定値ロードのエラーハンドリングパスが未検証。本番環境での設定ミスに対する脆弱性がある可能性"
    confidence: "medium"
    recommendation: "env_config.pyのカバレッジを80%以上に引き上げる"

  - id: "GAP-003"
    severity: "medium"
    category: "documentation"
    affected_qa: "QA-004 (ドキュメントカバレッジ)"
    intent:
      target: "全13個のActionがセットアップガイドを持つ"
      source: "intent.yml:137-148"
    current_state:
      actual: "14/15ディレクトリにドキュメント (93.3%)"
      missing: ["actions/_shared"]
      note: "_sharedはユーティリティディレクトリ"
      source: "claims.ndjson C-005, C-022"
    gap_description: "actions/_sharedにはinstructions.mdが存在しない"
    impact: "技術的には_gapsではない（_sharedはユーザー向けアクションではない）。ドキュメント整備としては実質100%"
    confidence: "low"
    recommendation: "QA-004の定義を見直し、'_sharedを除外する'または'全アクションディレクトリ（_shared除く）'に修正"

  - id: "GAP-004"
    severity: "low"
    category: "yaml_quality"
    affected_qa: "QA-002 (YAML構文検証)"
    intent:
      target: "全てのaction.ymlが有効なYAMLである"
      source: "intent.yml:109-120"
    current_state:
      actual: "全13個のaction.ymlが有効（yamllintでエラー0）"
      warnings: ["document-start missing", "line too long (120文字超)"]
      source: "claims.ndjson C-018"
    gap_description: "構文エラーはないが、yamllint警告が5ファイルにある"
    impact: "機能的には問題ない。可読性と保守性の観点で警告修正を検討"
    confidence: "low"
    recommendation: "yamllint警告を修正（---追加、長い行の折り返し）"

  - id: "GAP-005"
    severity: "medium"
    category: "adoption"
    affected_intent: "mission.desired_state"
    intent:
      target: "組織内の複数リポジトリで採用され、AIに任せられる雑務が増える"
      source: "intent.yml:9"
    current_state:
      actual: "外部採用数: 0件"
      phase: "Phase 3 (Stabilization & Adoption)"
      note: "パイロット募集中"
      source: "claims.ndjson C-012, C-014"
    gap_description: "プロジェクトはPhase 3（普及フェーズ）だが、外部採用が0件"
    impact: "存在意義（提供価値）が実証されていない。改善サイクルを回すための実ユーザー不在"
    confidence: "high"
    assumptions:
      - id: "ASM-001"
        description: "ターゲットユーザーはSelf-hosted runnerを運用するGitHub組織"
        confidence: "high"
    recommendation: "採用キャンペーンの実施（.audit/proposal/changes/PR-001-adoption-campaign.mdを参照）"

# === 達成度スコアリング ===

achievement_breakdown:
  test_coverage:
    score: 100
    max: 100
    rationale: "88.31% >= 80% target (bonus points for exceeding)"

  yaml_validity:
    score: 100
    max: 100
    rationale: "All 13 action.yml files are valid YAML"

  ai_review_acceptance_rate:
    score: 60
    max: 100
    rationale: "Target achieved (75% >= 70%) but sample size too small (4 << 20)"

  documentation_coverage:
    score: 95
    max: 100
    rationale: "14/15 directories have docs (93.3%). _shared is utility, not user-facing"

  adoption:
    score: 30
    max: 100
    rationale: "0 external adopters despite being in Phase 3 (adoption phase)"

total_score: 85
max_score: 100

# === 優先順位付け ===

priority_order:
  - priority: 1
    gap_id: "GAP-005"
    reason: "採用が進まないとプロジェクトの存在意義が実証されない"

  - priority: 2
    gap_id: "GAP-001"
    reason: "統計的有意性が不足しており、品質評価の信頼性が低い"

  - priority: 3
    gap_id: "GAP-002"
    reason: "設定ロジックのエラーハンドリングが未検証"

  - priority: 4
    gap_id: "GAP-003"
    reason: "実質的なギャップではないが、定義を明確化すべき"

  - priority: 5
    gap_id: "GAP-004"
    reason: "機能的には問題なく、低優先度"

# Gap Analysis
# Comparison between intent and current state
# Generated by Repo Genesis Auditor v2.0

generated_at: "2026-02-02T09:00:00Z"

# === Summary ===
summary:
  total_gaps: 5
  critical: 1
  high: 2
  medium: 2
  low: 0

# === Detailed Gaps ===

gaps:
  - id: "GAP-001"
    severity: "critical"
    category: "test_coverage"
    related_assumption: "ASM-002"
    related_qa: "QA-001"

    intent:
      statement: "全アクションがDry Runモードで検証可能"
      source: "CF-004, README.md:74"

    current_state:
      statement: "3/13アクションのみがテスト対象"
      metric: "23% (3/13 actions)"
      evidence: "pytest --collect-only shows 60 tests for 3 actions"

    gap_description: |
      README.mdでは「全てのAI ActionsはDry Runモードで自動検証される」と主張しているが、
      実際にはaction-fixer, review-and-merge, spec-to-codeの3つしかテストが存在しない。
      残り10アクション（auto-document, auto-merge等）にはテストが一切ない。

    impact: |
      - 新規アクション追加時の品質保証が不十分
      - 既存アクションの改修時に regressions が検知できない
      - READMEの主張と実態が不一致

    root_cause: |
      テスト作成の優先順位が、代表的な3アクションに集中していた。
      全13アクションを網羅するテストインフラの整備が不十分。

  - id: "GAP-002"
    severity: "high"
    category: "documentation"
    related_assumption: "ASM-004"

    intent:
      statement: "組織内の複数のリポジトリで採用される"
      source: "PURPOSE.md:70, 成功条件"

    current_state:
      statement: "導入実績が不明"
      evidence: "C-009 (unknown)"

    gap_description: |
      PURPOSE.mdで「組織内の複数のリポジトリで採用」を成功条件としているが、
      実際にどのリポジトリで導入されているか、また利用フィードバックが存在するか不明。

    impact: |
      - 採用状況の把握ができない
      - 実利用での課題が収集できていない可能性
      - Phase 3の進捗評価が困難

    root_cause: |
      導入リポジトリの追跡メカニズムがない。
      ADOPTION_GUIDE.mdは存在するが、実際の導入事例やフィードバックが記録されていない。

  - id: "GAP-003"
    severity: "high"
    category: "verification"
    related_qa: "QA-001"

    intent:
      statement: "テストカバレッジ >= 70%"
      source: "pytest.ini:22"

    current_state:
      statement: "テストカバレッジ 95.3%"
      metric: "95.3%"
      status: "exceeds_target"

    gap_description: |
      カバレッジ自体は目標を超えているが、これはテスト対象が3アクションに限られているため。
      全13アクションを対象にすれば、カバレッジは大幅に低下する可能性がある。

    impact: |
      - 見かけ上の高カバレッジが安心感を与える
      - 実態は大部分のアクションが未検証

    root_cause: |
      カバレッジ計測の範囲が不十分。
      pytest.iniの基準値は達成しているが、測定対象が偏っている。

  - id: "GAP-004"
    severity: "medium"
    category: "documentation"
    related_assumption: "ASM-001"

    intent:
      statement: "Self-hosted runner を運用する企業の開発チーム"
      source: "ASM-001"

    current_state:
      statement: "ドキュメントは整備されているが、導入ハードルが不明"

    gap_description: |
      READMEやADOPTION_GUIDEは充実しているが、実際の導入事例やトラブルシューティングが不足。
      特に「導入に失敗したケース」や「推奨構成」などの実践的情報が少ない。

    impact: |
      - 新規導入組織が同じ問題を繰り返す可能性
      - ベストプラクティスの共有が不十分

    root_cause: |
      ドキュメントが「理想的な手順」を記述する傾向があり、
      「現場の課題と解決」が記録されていない。

  - id: "GAP-005"
    severity: "medium"
    category: "process"
    related_qa: "QA-003"

    intent:
      statement: "各アクションに導入ガイドと利用例が存在"
      source: "QA-003"

    current_state:
      statement: "13/13アクションにinstructionsとexamplesが存在"
      metric: "100% coverage"
      status: "achieved"

    gap_description: |
      ドキュメント網羅性は達成しているが、内容の質にばらつきがある可能性。
      特にexamplesが実際に動作するかの検証が不十分。

    impact: |
      - ユーザーがexamplesをコピーしても動かない可能性
      - ファーストインプレッションの悪化

    root_cause: |
      examplesの自動検証が不十分。
      YAML構文チェックはあるが、実際のワークフロー実行テストがない。

# === Cross-Cutting Issues ===
cross_cutting_issues:
  - name: "Test Parity"
    description: |
      全13アクションのうち、3アクションのみが十分なテストカバーidgeを持っている。
      残り10アクションのテスト実装が急務。

    affected_gaps:
      - "GAP-001 (critical)"
      - "GAP-003 (high)"

  - name: "Adoption Visibility"
    description: |
      導入実績の追跡とフィードバック収集の仕組みがない。
      成功条件の評価が困難。

    affected_gaps:
      - "GAP-002 (high)"

# === Priority Matrix ===
priority_matrix:
  urgent_critical:
    - "GAP-001: 残り10アクションのテスト実装"

  high_importance:
    - "GAP-002: 導入実績の可視化"
    - "GAP-003: カバレッジ計測範囲の拡大"

  medium_importance:
    - "GAP-004: 実践的な導入ノウハウの蓄積"
    - "GAP-005: examplesの自動検証"
